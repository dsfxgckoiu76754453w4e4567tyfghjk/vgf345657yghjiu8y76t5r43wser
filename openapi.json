{
  "openapi": "3.1.0",
  "info": {
    "title": "Shia Islamic Chatbot",
    "description": "Production-grade comprehensive Shia Islamic knowledge chatbot",
    "version": "1.0.0"
  },
  "paths": {
    "/metrics": {
      "get": {
        "summary": "Metrics",
        "description": "Prometheus metrics endpoint.\n\nReturns:\n    Response: Prometheus metrics in text format",
        "operationId": "metrics_metrics_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "summary": "Health Check",
        "description": "Health check endpoint with optional dependency checks.\n\nArgs:\n    check_services: If True, checks database, Redis, and Qdrant health\n\nReturns:\n    dict: Comprehensive health status",
        "operationId": "health_check_health_get",
        "parameters": [
          {
            "name": "check_services",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Whether to check external service dependencies",
              "default": true,
              "title": "Check Services"
            },
            "description": "Whether to check external service dependencies"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Health Check Health Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/stats": {
      "get": {
        "summary": "Stats Endpoint",
        "description": "Application statistics endpoint.\n\nReturns:\n    dict: Application statistics including database and config info\n\nNote:\n    Only available in development and test environments",
        "operationId": "stats_endpoint_stats_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Stats Endpoint Stats Get"
                }
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "summary": "Root",
        "description": "Root endpoint.\n\nReturns:\n    dict: Welcome message and API information",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Root  Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/health/": {
      "get": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "Health Check",
        "description": "Basic health check.\n\nReturns:\n- status: \"healthy\"\n- timestamp: Current UTC time\n- version: App version\n- environment: Current environment\n\nAlways returns 200 OK if the app is running.",
        "operationId": "health_check_api_v1_health__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/health/detailed": {
      "get": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "Detailed Health Check",
        "description": "Detailed health check with service status.\n\nChecks:\n- Database connectivity\n- OpenRouter API configuration\n- Redis connectivity (if configured)\n\nReturns detailed status for each service.",
        "operationId": "detailed_health_check_api_v1_health_detailed_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DetailedHealthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/health/ready": {
      "get": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "Readiness Check",
        "description": "Readiness check for Kubernetes/load balancers.\n\nChecks if the app is ready to serve traffic:\n- Database is accessible\n- OpenRouter API is configured\n\nReturns 200 if ready, 503 if not ready.",
        "operationId": "readiness_check_api_v1_health_ready_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReadinessResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/health/live": {
      "get": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "Liveness Check",
        "description": "Liveness check for Kubernetes.\n\nSimple check that the app is running.\nReturns 200 OK if alive.\n\nUsed by Kubernetes to restart unhealthy pods.",
        "operationId": "liveness_check_api_v1_health_live_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "type": "object",
                  "title": "Response Liveness Check Api V1 Health Live Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/health/metrics": {
      "get": {
        "tags": [
          "Health & Monitoring"
        ],
        "summary": "Metrics",
        "description": "Basic metrics endpoint.\n\nReturns:\n- Database connection pool stats\n- App uptime\n- Request count (if available)\n\nFor production, consider using Prometheus metrics.",
        "operationId": "metrics_api_v1_health_metrics_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Metrics Api V1 Health Metrics Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/register": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Register",
        "description": "Register a new user with email and password.\n\n- **email**: Valid email address\n- **password**: Minimum 8 characters\n- **full_name**: Optional user's full name\n- **marja_preference**: Optional preferred Marja\n- **preferred_language**: Preferred language (default: fa)\n\nReturns user ID and sends verification email.",
        "operationId": "register_api_v1_auth_register_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRegisterRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserRegisterResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Login",
        "description": "Login with email and password.\n\n- **email**: Registered email address\n- **password**: User password\n\nReturns JWT tokens and user info.",
        "operationId": "login_api_v1_auth_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserLoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserLoginResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/verify-email": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Verify Email",
        "description": "Verify email with OTP code.\n\n- **email**: Email address to verify\n- **otp_code**: 6-digit OTP code from email\n\nMarks email as verified.",
        "operationId": "verify_email_api_v1_auth_verify_email_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EmailVerificationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmailVerificationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/resend-otp": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Resend Otp",
        "description": "Resend OTP code.\n\n- **email**: Email address\n- **purpose**: email_verification or password_reset\n\nSends a new OTP code to the email.",
        "operationId": "resend_otp_api_v1_auth_resend_otp_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ResendOTPRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ResendOTPResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/password-reset": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Request Password Reset",
        "description": "Request password reset (step 1).\n\n- **email**: Registered email address\n\nSends OTP code for password reset.",
        "operationId": "request_password_reset_api_v1_auth_password_reset_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PasswordResetRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PasswordResetResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/password-reset/confirm": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Confirm Password Reset",
        "description": "Confirm password reset with OTP (step 2).\n\n- **email**: Email address\n- **otp_code**: 6-digit OTP code from email\n- **new_password**: New password (minimum 8 characters)\n\nResets password if OTP is valid.",
        "operationId": "confirm_password_reset_api_v1_auth_password_reset_confirm_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PasswordResetConfirmRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PasswordResetConfirmResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/logout": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Logout",
        "description": "Logout current user.\n\nRevokes current session.",
        "operationId": "logout_api_v1_auth_logout_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LogoutResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/auth/me": {
      "get": {
        "tags": [
          "Authentication"
        ],
        "summary": "Get Current User Info",
        "description": "Get current authenticated user information.\n\nRequires valid JWT token.",
        "operationId": "get_current_user_info_api_v1_auth_me_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/auth/google/auth-code": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Google Oauth Login With Auth Code",
        "description": "Google OAuth login (server-side flow with authorization code).\n\n- **id_token**: Authorization code from Google OAuth flow\n\nExchanges authorization code for ID token, then creates/logs in user.\nUnified account support: If email already exists, links Google OAuth.",
        "operationId": "google_oauth_login_with_auth_code_api_v1_auth_google_auth_code_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GoogleOAuthRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GoogleOAuthResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/google/id-token": {
      "post": {
        "tags": [
          "Authentication"
        ],
        "summary": "Google Oauth Login With Id Token",
        "description": "Google OAuth login (client-side flow with ID token).\n\n- **id_token**: Google ID token from client\n\nVerifies ID token directly, then creates/logs in user.\nUnified account support: If email already exists, links Google OAuth.",
        "operationId": "google_oauth_login_with_id_token_api_v1_auth_google_id_token_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GoogleOAuthRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GoogleOAuthResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/documents/upload": {
      "post": {
        "tags": [
          "Documents & RAG"
        ],
        "summary": "Upload Document",
        "description": "Upload and process a new document.\n\n- **title**: Document title\n- **content**: Full text content\n- **document_type**: Type (hadith, quran, tafsir, fiqh, etc.)\n- **primary_category**: Category (aqidah, fiqh, etc.)\n- **language**: Language code (fa, ar, en, ur)\n- **chunking_strategy**: Chunking method (semantic, token, sentence, adaptive)\n\nDocument will be chunked using Chonkie and prepared for embedding generation.",
        "operationId": "upload_document_api_v1_documents_upload_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DocumentUploadRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DocumentUploadResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/documents/embeddings/generate": {
      "post": {
        "tags": [
          "Documents & RAG"
        ],
        "summary": "Generate Embeddings",
        "description": "Generate embeddings for a document's chunks.\n\n- **document_id**: Document ID\n\nGenerates vector embeddings using configured provider (Gemini/Cohere)\nand stores them in Qdrant.",
        "operationId": "generate_embeddings_api_v1_documents_embeddings_generate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EmbeddingsGenerationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmbeddingsGenerationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/documents/search": {
      "post": {
        "tags": [
          "Documents & RAG"
        ],
        "summary": "Search Documents",
        "description": "Search documents using semantic similarity.\n\n- **query**: Search query\n- **limit**: Maximum results (default: 10)\n- **score_threshold**: Minimum similarity score (default: 0.7)\n- **document_type**: Filter by document type (optional)\n- **language**: Filter by language (optional)\n\nReturns chunks ranked by semantic similarity.",
        "operationId": "search_documents_api_v1_documents_search_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SearchRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SearchResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/documents/qdrant/status": {
      "get": {
        "tags": [
          "Documents & RAG"
        ],
        "summary": "Get Qdrant Status",
        "description": "Get Qdrant collection status.\n\nRequires authentication.",
        "operationId": "get_qdrant_status_api_v1_documents_qdrant_status_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Get Qdrant Status Api V1 Documents Qdrant Status Get"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/tools/ahkam": {
      "post": {
        "tags": [
          "Specialized Tools"
        ],
        "summary": "Get Ahkam Ruling",
        "description": "Get Islamic ruling from official Marja source.\n\n    **CRITICAL**: This endpoint fetches rulings directly from official Marja websites,\n    NOT from RAG or stored documents. This ensures authenticity and up-to-date information.\n\n    Supported Maraji:\n    - Khamenei (default)\n    - Sistani\n    - Makarem Shirazi\n    - Saafi Golpaygani\n    - Nouri Hamadani",
        "operationId": "get_ahkam_ruling_api_v1_tools_ahkam_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AhkamRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AhkamResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tools/hadith/search": {
      "post": {
        "tags": [
          "Specialized Tools"
        ],
        "summary": "Search Hadith",
        "description": "Search for hadith by reference, text, or narrator.\n\n    Search types:\n    - **reference**: Search by hadith reference (e.g., \"Sahih al-Kafi 1:23\")\n    - **text**: Search by text content\n    - **narrator**: Search by narrator name\n\n    Supported collections:\n    - Sahih al-Kafi\n    - Al-Tahdhib\n    - Man La Yahduruhu al-Faqih\n    - Al-Istibsar",
        "operationId": "search_hadith_api_v1_tools_hadith_search_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/HadithSearchRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HadithSearchResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tools/datetime/prayer-times": {
      "post": {
        "tags": [
          "Specialized Tools"
        ],
        "summary": "Get Prayer Times",
        "description": "Get prayer times for a specific city and date.\n\n    Calculation methods vary by region:\n    - Iran: Institute of Geophysics, University of Tehran\n    - Iraq: Iraqi authorities\n    - Other regions: Islamic Society of North America (ISNA)",
        "operationId": "get_prayer_times_api_v1_tools_datetime_prayer_times_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PrayerTimesRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PrayerTimesResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tools/datetime/convert": {
      "post": {
        "tags": [
          "Specialized Tools"
        ],
        "summary": "Convert Date Between Calendars",
        "description": "Convert date between Gregorian and Hijri calendars.\n\n    Supports:\n    - Gregorian \u2192 Hijri\n    - Hijri \u2192 Gregorian",
        "operationId": "convert_date_api_v1_tools_datetime_convert_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DateConversionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DateConversionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tools/math/zakat": {
      "post": {
        "tags": [
          "Specialized Tools"
        ],
        "summary": "Calculate Zakat",
        "description": "Calculate Zakat amount based on total wealth.\n\n    \u26a0\ufe0f **IMPORTANT WARNING**: This is an APPROXIMATE calculation.\n\n    YOU MUST:\n    1. Verify with your Marja's official office\n    2. Consult a qualified Islamic financial advisor\n    3. Check the latest fatwas from your Marja\n\n    Different Maraji have different rules for:\n    - Nisab threshold\n    - Wealth calculation methods\n    - Exemptions and deductions",
        "operationId": "calculate_zakat_api_v1_tools_math_zakat_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ZakatRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ZakatResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tools/math/khums": {
      "post": {
        "tags": [
          "Specialized Tools"
        ],
        "summary": "Calculate Khums",
        "description": "Calculate Khums amount based on annual income and expenses.\n\n    \u26a0\ufe0f **IMPORTANT WARNING**: This is an APPROXIMATE calculation.\n\n    YOU MUST:\n    1. Verify with your Marja's official office\n    2. Consult a qualified Islamic financial advisor\n    3. Check the latest fatwas from your Marja\n\n    Different Maraji have different rules for:\n    - Calculation methods\n    - Exemptions (first home, business inventory, etc.)\n    - Payment timing",
        "operationId": "calculate_khums_api_v1_tools_math_khums_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/KhumsRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KhumsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tools/query": {
      "post": {
        "tags": [
          "Specialized Tools"
        ],
        "summary": "Execute Multi-Tool Query",
        "description": "Execute a query that may require multiple specialized tools.\n\n    **CRITICAL FEATURE**: One question can trigger MULTIPLE tools simultaneously.\n\n    Example queries:\n    - \"What is the ruling on Zakat and when are prayer times in Tehran?\"\n      \u2192 Triggers: Ahkam + DateTime tools\n\n    - \"Tell me about hadith on fasting and calculate my Khums\"\n      \u2192 Triggers: Hadith + Math tools\n\n    - \"What does Ayatollah Sistani say about music and what time is Maghrib?\"\n      \u2192 Triggers: Ahkam + DateTime tools\n\n    The orchestration service automatically:\n    1. Analyzes the query\n    2. Determines which tools are needed\n    3. Executes tools in parallel (for independent queries) or sequential (for dependent queries)\n    4. Combines results intelligently",
        "operationId": "execute_multi_tool_query_api_v1_tools_query_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MultiToolQueryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MultiToolQueryResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/api-keys": {
      "post": {
        "tags": [
          "Admin & Moderation"
        ],
        "summary": "Create Admin API Key",
        "description": "Create a new super-admin API key.\n\n    **CRITICAL**: Only super-admins can create API keys.\n\n    The API key is returned ONLY ONCE during creation. Save it immediately!\n\n    Permissions can include:\n    - user:read, user:write\n    - content:read, content:write, content:moderate\n    - admin:read, admin:write",
        "operationId": "create_api_key_api_v1_admin_api_keys_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateAPIKeyRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/APIKeyResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Admin & Moderation"
        ],
        "summary": "List API Keys",
        "description": "List all admin API keys (without the actual key values).",
        "operationId": "list_api_keys_api_v1_admin_api_keys_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "include_expired",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include expired keys",
              "default": false,
              "title": "Include Expired"
            },
            "description": "Include expired keys"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/APIKeyResponse"
                  },
                  "title": "Response List Api Keys Api V1 Admin Api Keys Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/api-keys/{api_key_id}/revoke": {
      "post": {
        "tags": [
          "Admin & Moderation"
        ],
        "summary": "Revoke API Key",
        "description": "Revoke an admin API key, making it immediately inactive.",
        "operationId": "revoke_api_key_api_v1_admin_api_keys__api_key_id__revoke_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "api_key_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Api Key Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RevokeAPIKeyResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/users": {
      "get": {
        "tags": [
          "Admin & Moderation"
        ],
        "summary": "List Users",
        "description": "List all users with filtering and pagination.",
        "operationId": "list_users_api_v1_admin_users_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Page number",
              "default": 1,
              "title": "Page"
            },
            "description": "Page number"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Items per page",
              "default": 50,
              "title": "Page Size"
            },
            "description": "Items per page"
          },
          {
            "name": "search_query",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Search by email or name",
              "title": "Search Query"
            },
            "description": "Search by email or name"
          },
          {
            "name": "role_filter",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by role",
              "title": "Role Filter"
            },
            "description": "Filter by role"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserListPaginatedResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/users/{user_id}/ban": {
      "post": {
        "tags": [
          "Admin & Moderation"
        ],
        "summary": "Ban User",
        "description": "Ban a user for a specified duration or permanently.",
        "operationId": "ban_user_api_v1_admin_users__user_id__ban_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "User Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BanUserRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BanUserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/users/{user_id}/unban": {
      "post": {
        "tags": [
          "Admin & Moderation"
        ],
        "summary": "Unban User",
        "description": "Unban a previously banned user.",
        "operationId": "unban_user_api_v1_admin_users__user_id__unban_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UnbanUserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/users/{user_id}/role": {
      "post": {
        "tags": [
          "Admin & Moderation"
        ],
        "summary": "Change User Role",
        "description": "Change a user's role (user, moderator, admin, super_admin).",
        "operationId": "change_user_role_api_v1_admin_users__user_id__role_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "User Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangeUserRoleRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChangeUserRoleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/content/pending": {
      "get": {
        "tags": [
          "Admin & Moderation"
        ],
        "summary": "Get Pending Content",
        "description": "Get content items pending moderation.",
        "operationId": "get_pending_content_api_v1_admin_content_pending_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum items to return",
              "default": 20,
              "title": "Limit"
            },
            "description": "Maximum items to return"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PendingContentItem"
                  },
                  "title": "Response Get Pending Content Api V1 Admin Content Pending Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/content/{content_type}/{content_id}/moderate": {
      "post": {
        "tags": [
          "Admin & Moderation"
        ],
        "summary": "Moderate Content",
        "description": "Approve or reject content.",
        "operationId": "moderate_content_api_v1_admin_content__content_type___content_id__moderate_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Type"
            }
          },
          {
            "name": "content_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Content Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ModerateContentRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ModerateContentResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/statistics": {
      "get": {
        "tags": [
          "Admin & Moderation"
        ],
        "summary": "Get System Statistics",
        "description": "Get system-wide statistics (users, content, chat).",
        "operationId": "get_system_statistics_api_v1_admin_statistics_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemStatisticsResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/support/tickets": {
      "post": {
        "tags": [
          "Support Tickets"
        ],
        "summary": "Create Support Ticket",
        "description": "Create a new support ticket.\n\n    Categories:\n    - technical: Technical issues with the platform\n    - content: Issues related to content quality or accuracy\n    - account: Account-related issues\n    - billing: Billing and payment issues\n    - other: Other issues\n\n    Priorities:\n    - low: Non-urgent issues\n    - medium: Standard priority (default)\n    - high: Important issues\n    - urgent: Critical issues requiring immediate attention",
        "operationId": "create_ticket_api_v1_support_tickets_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTicketRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TicketResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/support/tickets/my": {
      "get": {
        "tags": [
          "Support Tickets"
        ],
        "summary": "List My Tickets",
        "description": "List tickets created by the current user.",
        "operationId": "list_my_tickets_api_v1_support_tickets_my_get",
        "parameters": [
          {
            "name": "status_filter",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by status",
              "title": "Status Filter"
            },
            "description": "Filter by status"
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Page number",
              "default": 1,
              "title": "Page"
            },
            "description": "Page number"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Items per page",
              "default": 20,
              "title": "Page Size"
            },
            "description": "Items per page"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TicketListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/support/tickets/all": {
      "get": {
        "tags": [
          "Support Tickets"
        ],
        "summary": "List All Tickets (Admin)",
        "description": "List all support tickets with filtering (admin view).\n\n    **ADMIN ONLY**",
        "operationId": "list_all_tickets_api_v1_support_tickets_all_get",
        "parameters": [
          {
            "name": "status_filter",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by status",
              "title": "Status Filter"
            },
            "description": "Filter by status"
          },
          {
            "name": "category_filter",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by category",
              "title": "Category Filter"
            },
            "description": "Filter by category"
          },
          {
            "name": "priority_filter",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by priority",
              "title": "Priority Filter"
            },
            "description": "Filter by priority"
          },
          {
            "name": "assigned_to_me",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Show only my assigned tickets",
              "default": false,
              "title": "Assigned To Me"
            },
            "description": "Show only my assigned tickets"
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Page number",
              "default": 1,
              "title": "Page"
            },
            "description": "Page number"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Items per page",
              "default": 50,
              "title": "Page Size"
            },
            "description": "Items per page"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TicketListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/support/tickets/{ticket_id}": {
      "get": {
        "tags": [
          "Support Tickets"
        ],
        "summary": "Get Ticket Details",
        "description": "Get full ticket details including all responses.",
        "operationId": "get_ticket_details_api_v1_support_tickets__ticket_id__get",
        "parameters": [
          {
            "name": "ticket_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Ticket Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TicketDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/support/tickets/{ticket_id}/responses": {
      "post": {
        "tags": [
          "Support Tickets"
        ],
        "summary": "Add Ticket Response",
        "description": "Add a response to a support ticket (user or admin).",
        "operationId": "add_ticket_response_api_v1_support_tickets__ticket_id__responses_post",
        "parameters": [
          {
            "name": "ticket_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Ticket Id"
            }
          },
          {
            "name": "is_staff",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Is this a staff response?",
              "default": false,
              "title": "Is Staff"
            },
            "description": "Is this a staff response?"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddTicketResponseRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AddTicketResponseResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/support/tickets/{ticket_id}/assign": {
      "post": {
        "tags": [
          "Support Tickets"
        ],
        "summary": "Assign Ticket (Admin)",
        "description": "Assign a support ticket to an admin.\n\n    **ADMIN ONLY**",
        "operationId": "assign_ticket_api_v1_support_tickets__ticket_id__assign_post",
        "parameters": [
          {
            "name": "ticket_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Ticket Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AssignTicketRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AssignTicketResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/support/tickets/{ticket_id}/status": {
      "put": {
        "tags": [
          "Support Tickets"
        ],
        "summary": "Update Ticket Status",
        "description": "Update ticket status (open, in_progress, resolved, closed).\n\n    **ADMIN ONLY**",
        "operationId": "update_ticket_status_api_v1_support_tickets__ticket_id__status_put",
        "parameters": [
          {
            "name": "ticket_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Ticket Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateTicketStatusRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateTicketStatusResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/support/statistics": {
      "get": {
        "tags": [
          "Support Tickets"
        ],
        "summary": "Get Ticket Statistics",
        "description": "Get support ticket statistics.\n\n    **ADMIN ONLY**",
        "operationId": "get_ticket_statistics_api_v1_support_statistics_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TicketStatisticsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/leaderboard/documents": {
      "get": {
        "tags": [
          "Leaderboards"
        ],
        "summary": "Document Upload Leaderboard",
        "description": "Get leaderboard for document uploads.\n\n    Users are ranked by the number of documents they have uploaded.\n\n    Timeframes:\n    - all_time: All documents ever uploaded\n    - month: Last 30 days\n    - week: Last 7 days",
        "operationId": "get_document_upload_leaderboard_api_v1_leaderboard_documents_get",
        "parameters": [
          {
            "name": "timeframe",
            "in": "query",
            "required": false,
            "schema": {
              "enum": [
                "all_time",
                "month",
                "week"
              ],
              "type": "string",
              "description": "Time period",
              "default": "all_time",
              "title": "Timeframe"
            },
            "description": "Time period"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Number of top users",
              "default": 10,
              "title": "Limit"
            },
            "description": "Number of top users"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LeaderboardResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/leaderboard/chat": {
      "get": {
        "tags": [
          "Leaderboards"
        ],
        "summary": "Chat Activity Leaderboard",
        "description": "Get leaderboard for chat activity (number of messages sent).\n\n    Users are ranked by the number of messages they have sent.\n\n    Timeframes:\n    - all_time: All messages ever sent\n    - month: Last 30 days\n    - week: Last 7 days",
        "operationId": "get_chat_activity_leaderboard_api_v1_leaderboard_chat_get",
        "parameters": [
          {
            "name": "timeframe",
            "in": "query",
            "required": false,
            "schema": {
              "enum": [
                "all_time",
                "month",
                "week"
              ],
              "type": "string",
              "description": "Time period",
              "default": "all_time",
              "title": "Timeframe"
            },
            "description": "Time period"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Number of top users",
              "default": 10,
              "title": "Limit"
            },
            "description": "Number of top users"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LeaderboardResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/leaderboard/conversations": {
      "get": {
        "tags": [
          "Leaderboards"
        ],
        "summary": "Conversation Leaderboard",
        "description": "Get leaderboard for number of conversations started.\n\n    Users are ranked by the number of conversations they have created.\n\n    Timeframes:\n    - all_time: All conversations ever created\n    - month: Last 30 days\n    - week: Last 7 days",
        "operationId": "get_conversation_leaderboard_api_v1_leaderboard_conversations_get",
        "parameters": [
          {
            "name": "timeframe",
            "in": "query",
            "required": false,
            "schema": {
              "enum": [
                "all_time",
                "month",
                "week"
              ],
              "type": "string",
              "description": "Time period",
              "default": "all_time",
              "title": "Timeframe"
            },
            "description": "Time period"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Number of top users",
              "default": 10,
              "title": "Limit"
            },
            "description": "Number of top users"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LeaderboardResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/leaderboard/overall": {
      "get": {
        "tags": [
          "Leaderboards"
        ],
        "summary": "Overall Leaderboard",
        "description": "Get overall leaderboard combining multiple metrics.\n\n    **Scoring System:**\n    - Document upload: 10 points\n    - Conversation: 2 points\n    - Message: 1 point\n\n    This provides a balanced view of user contributions across different activities.\n\n    Timeframes:\n    - all_time: All time\n    - month: Last 30 days\n    - week: Last 7 days",
        "operationId": "get_overall_leaderboard_api_v1_leaderboard_overall_get",
        "parameters": [
          {
            "name": "timeframe",
            "in": "query",
            "required": false,
            "schema": {
              "enum": [
                "all_time",
                "month",
                "week"
              ],
              "type": "string",
              "description": "Time period",
              "default": "all_time",
              "title": "Timeframe"
            },
            "description": "Time period"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Number of top users",
              "default": 10,
              "title": "Limit"
            },
            "description": "Number of top users"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LeaderboardResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/leaderboard/users/{user_id}/statistics": {
      "get": {
        "tags": [
          "Leaderboards"
        ],
        "summary": "Get User Statistics",
        "description": "Get detailed statistics for a specific user.\n\n    Includes:\n    - Document uploads\n    - Conversations\n    - Messages\n    - Overall score\n    - Global rank\n\n    This allows users to see their own contribution metrics and ranking.",
        "operationId": "get_user_statistics_api_v1_leaderboard_users__user_id__statistics_get",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserStatisticsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/leaderboard/me/statistics": {
      "get": {
        "tags": [
          "Leaderboards"
        ],
        "summary": "Get My Statistics",
        "description": "Get statistics for the currently authenticated user.",
        "operationId": "get_my_statistics_api_v1_leaderboard_me_statistics_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserStatisticsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/external-api/clients": {
      "post": {
        "tags": [
          "External API Integration"
        ],
        "summary": "Register External API Client",
        "description": "Register a new external API client for third-party integrations.\n\n    **CRITICAL**: Returns API key and secret ONLY ONCE. Save them immediately!\n\n    Use Cases:\n    - Mobile apps integrating the chatbot\n    - Web applications\n    - Third-party services\n    - Custom integrations\n\n    Rate Limits:\n    - Per-minute: Controls burst traffic\n    - Per-day: Controls overall usage\n\n    CORS:\n    - Specify allowed_origins for browser-based apps\n    - Use [\"*\"] for development only (NOT recommended for production)",
        "operationId": "register_client_api_v1_external_api_clients_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterClientRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegisterClientResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "External API Integration"
        ],
        "summary": "List API Clients",
        "description": "List all API clients owned by the current user.",
        "operationId": "list_clients_api_v1_external_api_clients_get",
        "parameters": [
          {
            "name": "include_inactive",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include inactive clients",
              "default": false,
              "title": "Include Inactive"
            },
            "description": "Include inactive clients"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ClientListItem"
                  },
                  "title": "Response List Clients Api V1 External Api Clients Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/external-api/clients/{client_id}": {
      "get": {
        "tags": [
          "External API Integration"
        ],
        "summary": "Get Client Details",
        "description": "Get detailed information about an API client including usage statistics.",
        "operationId": "get_client_details_api_v1_external_api_clients__client_id__get",
        "parameters": [
          {
            "name": "client_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Client Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ClientDetailsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "External API Integration"
        ],
        "summary": "Update Client",
        "description": "Update client information (name, description, rate limits, etc.).",
        "operationId": "update_client_api_v1_external_api_clients__client_id__put",
        "parameters": [
          {
            "name": "client_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Client Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateClientRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateClientResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/external-api/clients/{client_id}/regenerate-secret": {
      "post": {
        "tags": [
          "External API Integration"
        ],
        "summary": "Regenerate API Secret",
        "description": "Regenerate API secret for a client.\n\n    **CRITICAL**: New secret is shown ONLY ONCE. Save it immediately!\n\n    Use this when:\n    - Secret is compromised\n    - Regular security rotation\n    - Lost/forgotten secret",
        "operationId": "regenerate_secret_api_v1_external_api_clients__client_id__regenerate_secret_post",
        "parameters": [
          {
            "name": "client_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Client Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegenerateSecretResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/external-api/clients/{client_id}/deactivate": {
      "post": {
        "tags": [
          "External API Integration"
        ],
        "summary": "Deactivate Client",
        "description": "Deactivate an API client. Deactivated clients cannot make API calls.",
        "operationId": "deactivate_client_api_v1_external_api_clients__client_id__deactivate_post",
        "parameters": [
          {
            "name": "client_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Client Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ClientStatusResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/external-api/clients/{client_id}/activate": {
      "post": {
        "tags": [
          "External API Integration"
        ],
        "summary": "Activate Client",
        "description": "Activate a previously deactivated API client.",
        "operationId": "activate_client_api_v1_external_api_clients__client_id__activate_post",
        "parameters": [
          {
            "name": "client_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Client Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ClientStatusResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/external-api/clients/{client_id}/usage": {
      "get": {
        "tags": [
          "External API Integration"
        ],
        "summary": "Get Usage Statistics",
        "description": "Get usage statistics for an API client.\n\n    Metrics include:\n    - Total requests\n    - Average response time\n    - Error rate\n    - Requests per day\n\n    Useful for:\n    - Monitoring API usage\n    - Detecting unusual patterns\n    - Capacity planning",
        "operationId": "get_usage_statistics_api_v1_external_api_clients__client_id__usage_get",
        "parameters": [
          {
            "name": "client_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Client Id"
            }
          },
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 90,
              "minimum": 1,
              "description": "Number of days to analyze",
              "default": 7,
              "title": "Days"
            },
            "description": "Number of days to analyze"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UsageStatisticsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/asr/transcribe": {
      "post": {
        "tags": [
          "Speech-to-Text (ASR)"
        ],
        "summary": "Transcribe Audio to Text",
        "description": "Transcribe audio files to text using ASR (Automatic Speech Recognition).\n\n    **Supported Providers:**\n    - OpenAI Whisper (default) - Highly accurate, multi-language\n    - Google Speech-to-Text - Enterprise-grade (placeholder)\n\n    **Supported Languages:**\n    - Persian/Farsi (fa) - Default\n    - English (en)\n    - Arabic (ar)\n    - Urdu (ur)\n    - Turkish (tr)\n    - Indonesian (id)\n    - Malay (ms)\n\n    **Supported Formats:**\n    - WAV, MP3, M4A, FLAC, OGG, WEBM\n\n    **File Size Limit:**\n    - Maximum: 25 MB (Whisper limit)\n\n    **Use Cases:**\n    - Voice questions to the chatbot\n    - Audio document transcription\n    - Lecture/sermon transcription\n    - Accessibility features",
        "operationId": "transcribe_audio_api_v1_asr_transcribe_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_transcribe_audio_api_v1_asr_transcribe_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TranscribeAudioResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/asr/translate": {
      "post": {
        "tags": [
          "Speech-to-Text (ASR)"
        ],
        "summary": "Translate Audio to English",
        "description": "Transcribe and translate audio to English (regardless of source language).\n\n    **CRITICAL**: This endpoint automatically detects the source language\n    and translates the audio content to English.\n\n    **Differences from /transcribe:**\n    - /transcribe: Returns text in the same language as the audio\n    - /translate: Returns text translated to English\n\n    **Example:**\n    - Input: Arabic audio saying \"\u0627\u0644\u0633\u0644\u0627\u0645 \u0639\u0644\u064a\u0643\u0645\"\n    - Output: English text \"Peace be upon you\"\n\n    **Use Cases:**\n    - Multi-language support\n    - Translation of Islamic lectures\n    - Cross-language communication\n    - Content localization\n\n    **Provider:**\n    - OpenAI Whisper only (Google Speech-to-Text doesn't support translation)",
        "operationId": "translate_audio_api_v1_asr_translate_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_translate_audio_api_v1_asr_translate_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TranscribeAudioResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/asr/languages": {
      "get": {
        "tags": [
          "Speech-to-Text (ASR)"
        ],
        "summary": "Get Supported Languages",
        "description": "Get list of languages supported for speech-to-text.\n\n    Languages are prioritized for Islamic content:\n    - Persian/Farsi (fa) - Primary language (Iran, Afghanistan)\n    - English (en) - International\n    - Arabic (ar) - Middle East, North Africa\n    - Urdu (ur) - Pakistan, India\n    - Turkish (tr) - Turkey\n    - Indonesian (id) - Indonesia\n    - Malay (ms) - Malaysia, Brunei\n\n    All languages use ISO 639-1 codes.",
        "operationId": "get_supported_languages_api_v1_asr_languages_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SupportedLanguagesResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/chat/": {
      "post": {
        "tags": [
          "Chat with Advanced Features"
        ],
        "summary": "Send Message",
        "description": "Send a chat message and get a response.\n\n- **conversation_id**: Conversation ID\n- **message**: User message content\n- **model**: Optional model override (default from settings)\n- **system_prompt**: Optional system prompt\n- **temperature**: Optional temperature (0.0-2.0)\n- **max_tokens**: Optional max tokens\n- **enable_caching**: Enable prompt caching (default from config)\n- **stream**: Enable streaming response (returns SSE)\n- **response_schema**: Optional JSON schema for structured output\n- **auto_detect_images**: Auto-detect image generation requests (default True)\n\nFeatures:\n- Automatic prompt caching for system prompts and conversation history\n- Model routing with fallbacks\n- Usage tracking with detailed token breakdown\n- Structured outputs with JSON schema validation\n- Cache-aware cost optimization\n- **Comprehensive Intent Detection**: Automatically detects and executes user intents:\n  * **Image Generation**: \"generate an image of...\"\n  * **Web Search**: \"search online for...\", \"google...\"\n  * **Deep Web Search**: \"do a thorough search for...\"\n  * **Document Search**: \"search my documents for...\"\n  * **Audio Transcription**: \"transcribe this audio...\"\n  * **Code/Document Analysis**: \"analyze this code...\"\n\nIntent Detection (Automatic):\n- Detects multiple intents in a single message\n- Prioritizes and executes high-confidence intents\n- Returns results in `intent_results` field\n- Examples:\n  * \"Generate an image of a mosque\" \u2192 automatic image generation\n  * \"Search online for Islamic history\" \u2192 web search request\n  * \"Search my documents for Quran verses\" \u2192 document RAG search\n\nReturns:\n- If stream=false: Complete response with usage metadata (may include generated_image)\n- If stream=true: Server-Sent Events (SSE) stream",
        "operationId": "send_message_api_v1_chat__post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/chat/structured": {
      "post": {
        "tags": [
          "Chat with Advanced Features"
        ],
        "summary": "Send Structured Message",
        "description": "Send a chat message with structured output.\n\nSame as /chat endpoint but enforces JSON schema validation.\n\n- **response_schema**: Required JSON schema for structured output\n\nExample response_schema:\n```json\n{\n  \"type\": \"object\",\n  \"properties\": {\n    \"answer\": {\"type\": \"string\"},\n    \"confidence\": {\"type\": \"number\", \"minimum\": 0, \"maximum\": 1}\n  },\n  \"required\": [\"answer\", \"confidence\"]\n}\n```\n\nThe assistant's response will be validated against the schema.",
        "operationId": "send_structured_message_api_v1_chat_structured_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/chat/cache-stats/{conversation_id}": {
      "get": {
        "tags": [
          "Chat with Advanced Features"
        ],
        "summary": "Get Cache Stats",
        "description": "Get prompt caching statistics for a conversation.\n\n- **conversation_id**: Conversation ID\n\nReturns cache hit rate and savings.",
        "operationId": "get_cache_stats_api_v1_chat_cache_stats__conversation_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "conversation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Conversation Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CacheStatsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/chat/async": {
      "post": {
        "tags": [
          "Chat with Advanced Features"
        ],
        "summary": "Send Message Async",
        "description": "Send chat message for async processing using Temporal workflow.\n\nReturns immediately with workflow ID for status checking.\nUse GET /api/v1/chat/workflows/{workflow_id} to check status.",
        "operationId": "send_message_async_api_v1_chat_async_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AsyncChatRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AsyncChatResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/chat/workflows/{workflow_id}": {
      "get": {
        "tags": [
          "Chat with Advanced Features"
        ],
        "summary": "Get Workflow Status",
        "description": "Get Temporal workflow status.",
        "operationId": "get_workflow_status_api_v1_chat_workflows__workflow_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "workflow_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Workflow Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/conversations/": {
      "post": {
        "tags": [
          "Conversation Management"
        ],
        "summary": "Create Conversation",
        "description": "Create a new conversation.\n\n- **title**: Optional conversation title\n- **mode**: Conversation mode (standard, fast, scholarly, deep_search, filtered)\n- **is_anonymous**: Create anonymous conversation\n\nReturns created conversation.",
        "operationId": "create_conversation_api_v1_conversations__post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConversationCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Conversation Management"
        ],
        "summary": "List Conversations",
        "description": "List user's conversations.\n\n- **limit**: Maximum conversations to return (default: 50)\n- **offset**: Number of conversations to skip (default: 0)\n- **include_inactive**: Include inactive conversations\n\nReturns list of conversations sorted by last activity.",
        "operationId": "list_conversations_api_v1_conversations__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          },
          {
            "name": "include_inactive",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Include Inactive"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/conversations/{conversation_id}": {
      "get": {
        "tags": [
          "Conversation Management"
        ],
        "summary": "Get Conversation",
        "description": "Get a conversation with all messages.\n\n- **conversation_id**: Conversation ID\n\nReturns conversation details with message history.",
        "operationId": "get_conversation_api_v1_conversations__conversation_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "conversation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Conversation Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Conversation Management"
        ],
        "summary": "Update Conversation",
        "description": "Update a conversation.\n\n- **conversation_id**: Conversation ID\n- **title**: Update title\n- **mode**: Update mode\n- **is_active**: Update active status\n\nReturns updated conversation.",
        "operationId": "update_conversation_api_v1_conversations__conversation_id__patch",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "conversation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Conversation Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ConversationUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Conversation Management"
        ],
        "summary": "Delete Conversation",
        "description": "Delete a conversation and all its messages.\n\n- **conversation_id**: Conversation ID\n\nPermanently deletes the conversation and all associated messages.",
        "operationId": "delete_conversation_api_v1_conversations__conversation_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "conversation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Conversation Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/conversations/{conversation_id}/generate-title": {
      "post": {
        "tags": [
          "Conversation Management"
        ],
        "summary": "Generate Conversation Title",
        "description": "Auto-generate a title for the conversation based on messages.\n\n- **conversation_id**: Conversation ID\n\nAnalyzes the first few messages and generates a descriptive title.\nReturns updated conversation with new title.",
        "operationId": "generate_conversation_title_api_v1_conversations__conversation_id__generate_title_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "conversation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Conversation Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConversationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/feedback/": {
      "post": {
        "tags": [
          "User Feedback & Scoring"
        ],
        "summary": "Submit Feedback",
        "description": "Submit user feedback on an assistant message.\n\n- **message_id**: ID of the message being rated\n- **feedback_type**: \"like\" or \"dislike\"\n- **dislike_reason**: Optional reason for dislike\n- **feedback_text**: Optional detailed feedback text\n- **was_helpful**: Optional boolean indicating helpfulness\n\nThe feedback is stored in the database and automatically sent to\nLangfuse as a score if Langfuse is enabled.\n\nFeedback scores:\n- Like: 1.0\n- Dislike: 0.0\n\nReturns:\n- Feedback ID and confirmation",
        "operationId": "submit_feedback_api_v1_feedback__post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FeedbackRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeedbackResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/feedback/message/{message_id}": {
      "get": {
        "tags": [
          "User Feedback & Scoring"
        ],
        "summary": "Get Message Feedback",
        "description": "Get all feedback for a specific message.\n\nReturns list of feedback entries with user information.",
        "operationId": "get_message_feedback_api_v1_feedback_message__message_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "message_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Message Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/feedback/stats/conversation/{conversation_id}": {
      "get": {
        "tags": [
          "User Feedback & Scoring"
        ],
        "summary": "Get Conversation Feedback Stats",
        "description": "Get feedback statistics for an entire conversation.\n\nReturns aggregated feedback metrics including like/dislike ratio,\naverage score, and most common dislike reasons.",
        "operationId": "get_conversation_feedback_stats_api_v1_feedback_stats_conversation__conversation_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "conversation_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Conversation Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/images/generate": {
      "post": {
        "tags": [
          "Image Generation"
        ],
        "summary": "Generate Image",
        "description": "Generate an image using OpenRouter.\n\n- **prompt**: Description of the image to generate\n- **conversation_id**: Optional conversation ID to associate with\n- **model**: Optional model override (default uses config setting)\n- **aspect_ratio**: Image aspect ratio (1:1, 16:9, 9:16, etc.)\n- **output_format**: Return URL or base64 encoded image\n\nRequires active subscription with image generation enabled.\nReturns generated image URL/data and metadata.",
        "operationId": "generate_image_api_v1_images_generate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ImageGenerationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ImageResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/images/history": {
      "get": {
        "tags": [
          "Image Generation"
        ],
        "summary": "Get Image History",
        "description": "Get user's image generation history.\n\n- **limit**: Maximum number of images to return (default: 50)\n- **offset**: Number of images to skip (default: 0)\n\nReturns list of generated images with metadata.",
        "operationId": "get_image_history_api_v1_images_history_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ImageListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/images/{image_id}": {
      "get": {
        "tags": [
          "Image Generation"
        ],
        "summary": "Get Image",
        "description": "Get a specific generated image by ID.\n\n- **image_id**: UUID of the generated image\n\nReturns image metadata and URL/data.",
        "operationId": "get_image_api_v1_images__image_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "image_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Image Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ImageResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Image Generation"
        ],
        "summary": "Delete Image",
        "description": "Delete a generated image.\n\n- **image_id**: UUID of the image to delete\n\nOnly the owner can delete an image.",
        "operationId": "delete_image_api_v1_images__image_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "image_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Image Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/storage/upload": {
      "post": {
        "tags": [
          "File Storage (MinIO)"
        ],
        "summary": "Upload File",
        "description": "Upload a file to MinIO storage.\n\n- **file**: File to upload\n- **bucket_type**: Bucket type (images, documents, audio, uploads)\n\nReturns file information including URL for access.",
        "operationId": "upload_file_api_v1_storage_upload_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "bucket_type",
            "in": "query",
            "required": false,
            "schema": {
              "enum": [
                "images",
                "documents",
                "audio",
                "uploads"
              ],
              "type": "string",
              "default": "uploads",
              "title": "Bucket Type"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_file_api_v1_storage_upload_post"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FileUploadResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/storage/{file_id}": {
      "get": {
        "tags": [
          "File Storage (MinIO)"
        ],
        "summary": "Get File Info",
        "description": "Get file information by ID.\n\nReturns file metadata and access URL.",
        "operationId": "get_file_info_api_v1_storage__file_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "File Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FileInfoResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "File Storage (MinIO)"
        ],
        "summary": "Delete File",
        "description": "Delete a file from storage.\n\nSoft deletes from database and removes from MinIO.",
        "operationId": "delete_file_api_v1_storage__file_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "File Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/storage/quota/me": {
      "get": {
        "tags": [
          "File Storage (MinIO)"
        ],
        "summary": "Get My Storage Quota",
        "description": "Get current user's storage quota and usage.\n\nReturns quota limits, current usage, and breakdown by file type.",
        "operationId": "get_my_storage_quota_api_v1_storage_quota_me_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StorageQuotaResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/presets/": {
      "post": {
        "tags": [
          "Model Presets"
        ],
        "summary": "Create Preset",
        "description": "Create a new model preset.\n\n- **name**: Preset name\n- **slug**: URL-friendly identifier (unique per user)\n- **model**: Model identifier (e.g., \"anthropic/claude-3.5-sonnet\")\n- **description**: Optional description\n- **system_prompt**: Optional system prompt template\n- **temperature**: Optional temperature (0.0-2.0)\n- **top_p**: Optional top_p (0.0-1.0)\n- **max_tokens**: Optional max tokens\n- **model_config**: Additional model configuration\n- **provider_preferences**: Provider routing preferences\n- **is_public**: Make preset publicly shareable\n\nRequires active subscription with presets enabled.\nReturns created preset.",
        "operationId": "create_preset_api_v1_presets__post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PresetCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PresetResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Model Presets"
        ],
        "summary": "List Presets",
        "description": "List user's presets.\n\n- **include_public**: Include public presets from other users\n\nReturns list of presets.",
        "operationId": "list_presets_api_v1_presets__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "include_public",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Include Public"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PresetListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/presets/{preset_id}": {
      "get": {
        "tags": [
          "Model Presets"
        ],
        "summary": "Get Preset",
        "description": "Get a specific preset by ID.\n\n- **preset_id**: UUID of the preset\n\nReturns preset details.",
        "operationId": "get_preset_api_v1_presets__preset_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "preset_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Preset Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PresetResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Model Presets"
        ],
        "summary": "Update Preset",
        "description": "Update a preset (only owner can update).\n\n- **preset_id**: UUID of the preset to update\n- Fields to update (all optional)\n\nReturns updated preset with incremented version.",
        "operationId": "update_preset_api_v1_presets__preset_id__patch",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "preset_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Preset Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PresetUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PresetResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Model Presets"
        ],
        "summary": "Delete Preset",
        "description": "Delete a preset (only owner can delete).\n\n- **preset_id**: UUID of the preset to delete",
        "operationId": "delete_preset_api_v1_presets__preset_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "preset_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Preset Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/presets/slug/{slug}": {
      "get": {
        "tags": [
          "Model Presets"
        ],
        "summary": "Get Preset By Slug",
        "description": "Get a preset by slug.\n\n- **slug**: Slug of the preset\n\nReturns preset details.",
        "operationId": "get_preset_by_slug_api_v1_presets_slug__slug__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "slug",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Slug"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PresetResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/presets/{preset_id}/duplicate": {
      "post": {
        "tags": [
          "Model Presets"
        ],
        "summary": "Duplicate Preset",
        "description": "Duplicate a preset (user's own or public).\n\n- **preset_id**: UUID of the preset to duplicate\n- **new_name**: Name for the duplicated preset\n- **new_slug**: Slug for the duplicated preset\n\nReturns the new duplicated preset.",
        "operationId": "duplicate_preset_api_v1_presets__preset_id__duplicate_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "preset_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Preset Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PresetDuplicateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PresetResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/subscriptions/me": {
      "get": {
        "tags": [
          "Subscriptions"
        ],
        "summary": "Get My Subscription",
        "description": "Get current user's subscription.\n\nReturns active subscription details.",
        "operationId": "get_my_subscription_api_v1_subscriptions_me_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SubscriptionResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/subscriptions/": {
      "post": {
        "tags": [
          "Subscriptions"
        ],
        "summary": "Create Subscription",
        "description": "Create a new subscription for the current user.\n\n- **plan_type**: Plan type (free, premium, unlimited, enterprise)\n- **billing_cycle**: Billing cycle (monthly, yearly)\n- **trial_days**: Optional trial period in days\n\nReturns created subscription.",
        "operationId": "create_subscription_api_v1_subscriptions__post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SubscriptionCreateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SubscriptionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/subscriptions/usage": {
      "get": {
        "tags": [
          "Subscriptions"
        ],
        "summary": "Get Usage Stats",
        "description": "Get current user's usage statistics for the current month.\n\nReturns usage limits and current usage.",
        "operationId": "get_usage_stats_api_v1_subscriptions_usage_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UsageStatsResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/subscriptions/cancel": {
      "post": {
        "tags": [
          "Subscriptions"
        ],
        "summary": "Cancel Subscription",
        "description": "Cancel current subscription.\n\n- **at_period_end**: Cancel at period end (true) or immediately (false)\n\nReturns updated subscription.",
        "operationId": "cancel_subscription_api_v1_subscriptions_cancel_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CancelSubscriptionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SubscriptionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/subscriptions/plans": {
      "get": {
        "tags": [
          "Subscriptions"
        ],
        "summary": "List Plans",
        "description": "List all available subscription plans.\n\nReturns list of plans with features and pricing.",
        "operationId": "list_plans_api_v1_subscriptions_plans_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlanListResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/subscriptions/plans/{plan_type}": {
      "get": {
        "tags": [
          "Subscriptions"
        ],
        "summary": "Get Plan",
        "description": "Get details for a specific plan.\n\n- **plan_type**: Plan type (free, premium, unlimited, enterprise)\n\nReturns plan details with features and pricing.",
        "operationId": "get_plan_api_v1_subscriptions_plans__plan_type__get",
        "parameters": [
          {
            "name": "plan_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Plan Type"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PlanLimitResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/system-stats": {
      "get": {
        "tags": [
          "Analytics (Admin)"
        ],
        "summary": "Get System Stats",
        "description": "Get system-wide statistics.\n\nRequires admin role.\n\nReturns:\n- Total users\n- Active users (30 days)\n- Total conversations and messages\n- Total tokens used\n- Total images generated\n- Total cost and cache savings\n- Overall cache hit rate",
        "operationId": "get_system_stats_api_v1_analytics_system_stats_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemStatsResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/plan-distribution": {
      "get": {
        "tags": [
          "Analytics (Admin)"
        ],
        "summary": "Get Plan Distribution",
        "description": "Get subscription plan distribution.\n\nRequires admin role.\n\nReturns user count and percentage per plan.",
        "operationId": "get_plan_distribution_api_v1_analytics_plan_distribution_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/PlanDistributionResponse"
                  },
                  "type": "array",
                  "title": "Response Get Plan Distribution Api V1 Analytics Plan Distribution Get"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/usage-trends": {
      "get": {
        "tags": [
          "Analytics (Admin)"
        ],
        "summary": "Get Usage Trends",
        "description": "Get usage trends over time.\n\n- **days**: Number of days to include (default: 30)\n\nRequires admin role.\n\nReturns daily usage statistics.",
        "operationId": "get_usage_trends_api_v1_analytics_usage_trends_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 30,
              "title": "Days"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UsageTrendResponse"
                  },
                  "title": "Response Get Usage Trends Api V1 Analytics Usage Trends Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/top-users": {
      "get": {
        "tags": [
          "Analytics (Admin)"
        ],
        "summary": "Get Top Users",
        "description": "Get top users by usage.\n\n- **limit**: Number of top users to return (default: 10)\n\nRequires admin role.\n\nReturns top users sorted by total cost.",
        "operationId": "get_top_users_api_v1_analytics_top_users_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 10,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TopUsersResponse"
                  },
                  "title": "Response Get Top Users Api V1 Analytics Top Users Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analytics/model-usage": {
      "get": {
        "tags": [
          "Analytics (Admin)"
        ],
        "summary": "Get Model Usage",
        "description": "Get model usage statistics.\n\nRequires admin role.\n\nReturns usage breakdown per model.",
        "operationId": "get_model_usage_api_v1_analytics_model_usage_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/ModelUsageResponse"
                  },
                  "type": "array",
                  "title": "Response Get Model Usage Api V1 Analytics Model Usage Get"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/analytics/cache-performance": {
      "get": {
        "tags": [
          "Analytics (Admin)"
        ],
        "summary": "Get Cache Performance",
        "description": "Get prompt caching performance metrics.\n\nRequires admin role.\n\nReturns detailed caching statistics.",
        "operationId": "get_cache_performance_api_v1_analytics_cache_performance_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CachePerformanceResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    }
  },
  "components": {
    "schemas": {
      "APIKeyResponse": {
        "properties": {
          "api_key_id": {
            "type": "string",
            "title": "Api Key Id"
          },
          "key_name": {
            "type": "string",
            "title": "Key Name"
          },
          "api_key": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Api Key"
          },
          "permissions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Permissions"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          },
          "last_used_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Used At"
          },
          "expires_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Expires At"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "warning": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Warning"
          }
        },
        "type": "object",
        "required": [
          "api_key_id",
          "key_name",
          "permissions",
          "created_at",
          "is_active"
        ],
        "title": "APIKeyResponse",
        "description": "Response schema for API key."
      },
      "AddTicketResponseRequest": {
        "properties": {
          "message": {
            "type": "string",
            "maxLength": 2000,
            "minLength": 10,
            "title": "Message",
            "description": "Response message"
          }
        },
        "type": "object",
        "required": [
          "message"
        ],
        "title": "AddTicketResponseRequest",
        "description": "Request schema for adding ticket response.",
        "example": {
          "message": "Thank you for reporting this issue. We are investigating and will update you soon."
        }
      },
      "AddTicketResponseResponse": {
        "properties": {
          "response_id": {
            "type": "string",
            "title": "Response Id"
          },
          "ticket_id": {
            "type": "string",
            "title": "Ticket Id"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "is_staff_response": {
            "type": "boolean",
            "title": "Is Staff Response"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "response_id",
          "ticket_id",
          "message",
          "is_staff_response",
          "created_at"
        ],
        "title": "AddTicketResponseResponse",
        "description": "Response schema for ticket response."
      },
      "AhkamRequest": {
        "properties": {
          "question": {
            "type": "string",
            "maxLength": 500,
            "minLength": 10,
            "title": "Question",
            "description": "Question to ask"
          },
          "marja_name": {
            "type": "string",
            "title": "Marja Name",
            "description": "Name of Marja",
            "default": "Khamenei"
          },
          "user_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Id",
            "description": "User ID for logging"
          }
        },
        "type": "object",
        "required": [
          "question"
        ],
        "title": "AhkamRequest",
        "description": "Request schema for Ahkam ruling.",
        "example": {
          "marja_name": "Khamenei",
          "question": "What is the ruling on working in a bank?"
        }
      },
      "AhkamResponse": {
        "properties": {
          "question": {
            "type": "string",
            "title": "Question"
          },
          "marja": {
            "type": "string",
            "title": "Marja"
          },
          "ruling": {
            "type": "string",
            "title": "Ruling"
          },
          "source": {
            "type": "string",
            "title": "Source"
          },
          "source_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Url"
          },
          "fetched_at": {
            "type": "string",
            "format": "date-time",
            "title": "Fetched At"
          },
          "from_cache": {
            "type": "boolean",
            "title": "From Cache"
          },
          "authenticity_note": {
            "type": "string",
            "title": "Authenticity Note",
            "default": "This ruling is fetched directly from official Marja source."
          }
        },
        "type": "object",
        "required": [
          "question",
          "marja",
          "ruling",
          "source",
          "fetched_at",
          "from_cache"
        ],
        "title": "AhkamResponse",
        "description": "Response schema for Ahkam ruling.",
        "example": {
          "authenticity_note": "This ruling is fetched directly from official Marja source.",
          "fetched_at": "2025-10-25T12:30:00Z",
          "from_cache": false,
          "marja": "Khamenei",
          "question": "What is the ruling on working in a bank?",
          "ruling": "Working in a conventional bank that deals with interest is not permissible...",
          "source": "Official Website",
          "source_url": "https://www.leader.ir/en/ahkam"
        }
      },
      "AssignTicketRequest": {
        "properties": {
          "assign_to_admin_id": {
            "type": "string",
            "format": "uuid",
            "title": "Assign To Admin Id"
          }
        },
        "type": "object",
        "required": [
          "assign_to_admin_id"
        ],
        "title": "AssignTicketRequest",
        "description": "Request schema for assigning ticket.",
        "example": {
          "assign_to_admin_id": "123e4567-e89b-12d3-a456-426614174000"
        }
      },
      "AssignTicketResponse": {
        "properties": {
          "ticket_id": {
            "type": "string",
            "title": "Ticket Id"
          },
          "assigned_to": {
            "type": "string",
            "title": "Assigned To"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "assigned_at": {
            "type": "string",
            "title": "Assigned At"
          }
        },
        "type": "object",
        "required": [
          "ticket_id",
          "assigned_to",
          "status",
          "assigned_at"
        ],
        "title": "AssignTicketResponse",
        "description": "Response schema for ticket assignment."
      },
      "AsyncChatRequest": {
        "properties": {
          "conversation_id": {
            "type": "string",
            "format": "uuid",
            "title": "Conversation Id"
          },
          "message": {
            "type": "string",
            "maxLength": 10000,
            "minLength": 1,
            "title": "Message"
          },
          "model": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Model"
          },
          "temperature": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 2.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Temperature"
          },
          "max_tokens": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Tokens"
          },
          "enable_caching": {
            "type": "boolean",
            "title": "Enable Caching",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "conversation_id",
          "message"
        ],
        "title": "AsyncChatRequest",
        "description": "Async chat request using Temporal."
      },
      "AsyncChatResponse": {
        "properties": {
          "workflow_id": {
            "type": "string",
            "title": "Workflow Id"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "workflow_url": {
            "type": "string",
            "title": "Workflow Url"
          }
        },
        "type": "object",
        "required": [
          "workflow_id",
          "status",
          "workflow_url"
        ],
        "title": "AsyncChatResponse",
        "description": "Async chat response."
      },
      "BanUserRequest": {
        "properties": {
          "reason": {
            "type": "string",
            "maxLength": 500,
            "minLength": 10,
            "title": "Reason",
            "description": "Reason for ban"
          },
          "ban_duration_days": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Ban Duration Days",
            "description": "Duration in days (None = permanent)"
          }
        },
        "type": "object",
        "required": [
          "reason"
        ],
        "title": "BanUserRequest",
        "description": "Request schema for banning a user.",
        "example": {
          "ban_duration_days": 7,
          "reason": "Violation of community guidelines - spam content"
        }
      },
      "BanUserResponse": {
        "properties": {
          "user_id": {
            "type": "string",
            "title": "User Id"
          },
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "reason": {
            "type": "string",
            "title": "Reason"
          },
          "ban_expires_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ban Expires At"
          },
          "banned_at": {
            "type": "string",
            "title": "Banned At"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "email",
          "status",
          "reason",
          "ban_expires_at",
          "banned_at"
        ],
        "title": "BanUserResponse",
        "description": "Response schema for ban action."
      },
      "Body_transcribe_audio_api_v1_asr_transcribe_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File",
            "description": "Audio file to transcribe"
          },
          "language": {
            "type": "string",
            "title": "Language",
            "description": "Language code",
            "default": "fa"
          },
          "model": {
            "type": "string",
            "title": "Model",
            "description": "Specific model (optional)"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_transcribe_audio_api_v1_asr_transcribe_post"
      },
      "Body_translate_audio_api_v1_asr_translate_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File",
            "description": "Audio file to translate"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_translate_audio_api_v1_asr_translate_post"
      },
      "Body_upload_file_api_v1_storage_upload_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_upload_file_api_v1_storage_upload_post"
      },
      "CachePerformanceResponse": {
        "properties": {
          "total_messages": {
            "type": "integer",
            "title": "Total Messages"
          },
          "cached_messages": {
            "type": "integer",
            "title": "Cached Messages"
          },
          "cache_hit_rate": {
            "type": "number",
            "title": "Cache Hit Rate"
          },
          "total_tokens_cached": {
            "type": "integer",
            "title": "Total Tokens Cached"
          },
          "total_cache_savings_usd": {
            "type": "number",
            "title": "Total Cache Savings Usd"
          },
          "average_cache_discount_per_message": {
            "type": "number",
            "title": "Average Cache Discount Per Message"
          }
        },
        "type": "object",
        "required": [
          "total_messages",
          "cached_messages",
          "cache_hit_rate",
          "total_tokens_cached",
          "total_cache_savings_usd",
          "average_cache_discount_per_message"
        ],
        "title": "CachePerformanceResponse",
        "description": "Cache performance metrics."
      },
      "CacheStatsResponse": {
        "properties": {
          "total_messages": {
            "type": "integer",
            "title": "Total Messages"
          },
          "cached_messages": {
            "type": "integer",
            "title": "Cached Messages"
          },
          "total_cached_tokens": {
            "type": "integer",
            "title": "Total Cached Tokens"
          },
          "total_cache_savings_usd": {
            "type": "number",
            "title": "Total Cache Savings Usd"
          },
          "cache_hit_rate": {
            "type": "number",
            "title": "Cache Hit Rate"
          }
        },
        "type": "object",
        "required": [
          "total_messages",
          "cached_messages",
          "total_cached_tokens",
          "total_cache_savings_usd",
          "cache_hit_rate"
        ],
        "title": "CacheStatsResponse",
        "description": "Cache statistics response."
      },
      "CancelSubscriptionRequest": {
        "properties": {
          "at_period_end": {
            "type": "boolean",
            "title": "At Period End",
            "description": "Cancel at period end (true) or immediately (false)",
            "default": true
          }
        },
        "type": "object",
        "title": "CancelSubscriptionRequest",
        "description": "Subscription cancellation request."
      },
      "ChangeUserRoleRequest": {
        "properties": {
          "new_role": {
            "type": "string",
            "enum": [
              "user",
              "moderator",
              "admin",
              "super_admin"
            ],
            "title": "New Role"
          }
        },
        "type": "object",
        "required": [
          "new_role"
        ],
        "title": "ChangeUserRoleRequest",
        "description": "Request schema for changing user role.",
        "example": {
          "new_role": "moderator"
        }
      },
      "ChangeUserRoleResponse": {
        "properties": {
          "user_id": {
            "type": "string",
            "title": "User Id"
          },
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "old_role": {
            "type": "string",
            "title": "Old Role"
          },
          "new_role": {
            "type": "string",
            "title": "New Role"
          },
          "changed_at": {
            "type": "string",
            "title": "Changed At"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "email",
          "old_role",
          "new_role",
          "changed_at"
        ],
        "title": "ChangeUserRoleResponse",
        "description": "Response schema for role change."
      },
      "ChatRequest": {
        "properties": {
          "conversation_id": {
            "type": "string",
            "format": "uuid",
            "title": "Conversation Id",
            "description": "Conversation ID"
          },
          "message": {
            "type": "string",
            "maxLength": 10000,
            "minLength": 1,
            "title": "Message",
            "description": "User message"
          },
          "model": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Model",
            "description": "Optional model override"
          },
          "system_prompt": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "System Prompt",
            "description": "Optional system prompt"
          },
          "temperature": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 2.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Temperature",
            "description": "Temperature (0.0-2.0)"
          },
          "max_tokens": {
            "anyOf": [
              {
                "type": "integer",
                "exclusiveMinimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Tokens",
            "description": "Maximum tokens"
          },
          "enable_caching": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Enable Caching",
            "description": "Enable prompt caching"
          },
          "stream": {
            "type": "boolean",
            "title": "Stream",
            "description": "Enable streaming response",
            "default": false
          },
          "response_schema": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Response Schema",
            "description": "JSON schema for structured output"
          },
          "auto_detect_images": {
            "type": "boolean",
            "title": "Auto Detect Images",
            "description": "Auto-detect image generation requests",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "conversation_id",
          "message"
        ],
        "title": "ChatRequest",
        "description": "Chat message request."
      },
      "ChatResponse": {
        "properties": {
          "message_id": {
            "type": "string",
            "format": "uuid",
            "title": "Message Id"
          },
          "content": {
            "type": "string",
            "title": "Content"
          },
          "model": {
            "type": "string",
            "title": "Model"
          },
          "usage": {
            "type": "object",
            "title": "Usage"
          },
          "cached_tokens_read": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cached Tokens Read"
          },
          "cached_tokens_write": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cached Tokens Write"
          },
          "cache_discount_usd": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cache Discount Usd"
          },
          "total_cost_usd": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Cost Usd"
          },
          "fallback_used": {
            "type": "boolean",
            "title": "Fallback Used",
            "default": false
          },
          "final_model_used": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Final Model Used"
          },
          "generated_image": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Generated Image"
          },
          "intent_results": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Intent Results"
          },
          "langfuse_trace_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Langfuse Trace Id"
          },
          "langfuse_observation_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Langfuse Observation Id"
          }
        },
        "type": "object",
        "required": [
          "message_id",
          "content",
          "model",
          "usage"
        ],
        "title": "ChatResponse",
        "description": "Chat message response."
      },
      "ClientDetailsResponse": {
        "properties": {
          "client_id": {
            "type": "string",
            "title": "Client Id"
          },
          "app_name": {
            "type": "string",
            "title": "App Name"
          },
          "app_description": {
            "type": "string",
            "title": "App Description"
          },
          "callback_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Callback Url"
          },
          "allowed_origins": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Allowed Origins"
          },
          "rate_limit_per_minute": {
            "type": "integer",
            "title": "Rate Limit Per Minute"
          },
          "rate_limit_per_day": {
            "type": "integer",
            "title": "Rate Limit Per Day"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          },
          "last_used_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Used At"
          },
          "usage_statistics": {
            "type": "object",
            "title": "Usage Statistics"
          }
        },
        "type": "object",
        "required": [
          "client_id",
          "app_name",
          "app_description",
          "callback_url",
          "allowed_origins",
          "rate_limit_per_minute",
          "rate_limit_per_day",
          "is_active",
          "created_at",
          "last_used_at",
          "usage_statistics"
        ],
        "title": "ClientDetailsResponse",
        "description": "Detailed client information with usage statistics."
      },
      "ClientListItem": {
        "properties": {
          "client_id": {
            "type": "string",
            "title": "Client Id"
          },
          "app_name": {
            "type": "string",
            "title": "App Name"
          },
          "app_description": {
            "type": "string",
            "title": "App Description"
          },
          "callback_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Callback Url"
          },
          "allowed_origins": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Allowed Origins"
          },
          "rate_limit_per_minute": {
            "type": "integer",
            "title": "Rate Limit Per Minute"
          },
          "rate_limit_per_day": {
            "type": "integer",
            "title": "Rate Limit Per Day"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          },
          "last_used_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Used At"
          }
        },
        "type": "object",
        "required": [
          "client_id",
          "app_name",
          "app_description",
          "callback_url",
          "allowed_origins",
          "rate_limit_per_minute",
          "rate_limit_per_day",
          "is_active",
          "created_at",
          "last_used_at"
        ],
        "title": "ClientListItem",
        "description": "Single client in list."
      },
      "ClientStatusResponse": {
        "properties": {
          "client_id": {
            "type": "string",
            "title": "Client Id"
          },
          "app_name": {
            "type": "string",
            "title": "App Name"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "activated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Activated At"
          },
          "deactivated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Deactivated At"
          }
        },
        "type": "object",
        "required": [
          "client_id",
          "app_name",
          "status"
        ],
        "title": "ClientStatusResponse",
        "description": "Response schema for activate/deactivate."
      },
      "ConversationCreateRequest": {
        "properties": {
          "title": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 200
              },
              {
                "type": "null"
              }
            ],
            "title": "Title",
            "description": "Optional conversation title"
          },
          "mode": {
            "type": "string",
            "title": "Mode",
            "description": "Conversation mode (standard, fast, scholarly, etc.)",
            "default": "standard"
          },
          "is_anonymous": {
            "type": "boolean",
            "title": "Is Anonymous",
            "description": "Anonymous conversation",
            "default": false
          }
        },
        "type": "object",
        "title": "ConversationCreateRequest",
        "description": "Conversation creation request."
      },
      "ConversationDetailResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "user_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Id"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "is_title_auto_generated": {
            "type": "boolean",
            "title": "Is Title Auto Generated"
          },
          "mode": {
            "type": "string",
            "title": "Mode"
          },
          "is_anonymous": {
            "type": "boolean",
            "title": "Is Anonymous"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "message_count": {
            "type": "integer",
            "title": "Message Count"
          },
          "total_tokens_used": {
            "type": "integer",
            "title": "Total Tokens Used"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "title": "Updated At"
          },
          "last_message_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Message At"
          },
          "messages": {
            "items": {
              "$ref": "#/components/schemas/MessageResponse"
            },
            "type": "array",
            "title": "Messages"
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_id",
          "title",
          "is_title_auto_generated",
          "mode",
          "is_anonymous",
          "is_active",
          "message_count",
          "total_tokens_used",
          "created_at",
          "updated_at",
          "last_message_at",
          "messages"
        ],
        "title": "ConversationDetailResponse",
        "description": "Detailed conversation with messages."
      },
      "ConversationListResponse": {
        "properties": {
          "conversations": {
            "items": {
              "$ref": "#/components/schemas/ConversationResponse"
            },
            "type": "array",
            "title": "Conversations"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "conversations",
          "total"
        ],
        "title": "ConversationListResponse",
        "description": "List of conversations."
      },
      "ConversationResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "user_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Id"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "is_title_auto_generated": {
            "type": "boolean",
            "title": "Is Title Auto Generated"
          },
          "mode": {
            "type": "string",
            "title": "Mode"
          },
          "is_anonymous": {
            "type": "boolean",
            "title": "Is Anonymous"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "message_count": {
            "type": "integer",
            "title": "Message Count"
          },
          "total_tokens_used": {
            "type": "integer",
            "title": "Total Tokens Used"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "title": "Updated At"
          },
          "last_message_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Message At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_id",
          "title",
          "is_title_auto_generated",
          "mode",
          "is_anonymous",
          "is_active",
          "message_count",
          "total_tokens_used",
          "created_at",
          "updated_at",
          "last_message_at"
        ],
        "title": "ConversationResponse",
        "description": "Conversation response."
      },
      "ConversationUpdateRequest": {
        "properties": {
          "title": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 200
              },
              {
                "type": "null"
              }
            ],
            "title": "Title",
            "description": "Conversation title"
          },
          "mode": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mode",
            "description": "Conversation mode"
          },
          "is_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Active",
            "description": "Active status"
          }
        },
        "type": "object",
        "title": "ConversationUpdateRequest",
        "description": "Conversation update request."
      },
      "CreateAPIKeyRequest": {
        "properties": {
          "key_name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 3,
            "title": "Key Name",
            "description": "Descriptive key name"
          },
          "permissions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "minItems": 1,
            "title": "Permissions",
            "description": "List of permissions"
          },
          "expires_in_days": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 365.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Expires In Days",
            "description": "Expiration in days (None = never)"
          }
        },
        "type": "object",
        "required": [
          "key_name",
          "permissions"
        ],
        "title": "CreateAPIKeyRequest",
        "description": "Request schema for creating admin API key.",
        "example": {
          "expires_in_days": 90,
          "key_name": "Production Admin Key",
          "permissions": [
            "user:read",
            "user:write",
            "content:moderate"
          ]
        }
      },
      "CreateTicketRequest": {
        "properties": {
          "subject": {
            "type": "string",
            "maxLength": 200,
            "minLength": 5,
            "title": "Subject",
            "description": "Ticket subject"
          },
          "description": {
            "type": "string",
            "maxLength": 2000,
            "minLength": 20,
            "title": "Description",
            "description": "Detailed description"
          },
          "category": {
            "type": "string",
            "enum": [
              "technical",
              "content",
              "account",
              "billing",
              "other"
            ],
            "title": "Category",
            "default": "other"
          },
          "priority": {
            "type": "string",
            "enum": [
              "low",
              "medium",
              "high",
              "urgent"
            ],
            "title": "Priority",
            "default": "medium"
          }
        },
        "type": "object",
        "required": [
          "subject",
          "description"
        ],
        "title": "CreateTicketRequest",
        "description": "Request schema for creating support ticket.",
        "example": {
          "category": "technical",
          "description": "I'm getting an error when trying to upload PDF documents. The error message says...",
          "priority": "medium",
          "subject": "Unable to upload documents"
        }
      },
      "DateConversionRequest": {
        "properties": {
          "date": {
            "type": "string",
            "title": "Date",
            "description": "Date to convert (YYYY-MM-DD or Hijri format)"
          },
          "from_calendar": {
            "type": "string",
            "enum": [
              "gregorian",
              "hijri"
            ],
            "title": "From Calendar",
            "description": "Source calendar"
          },
          "to_calendar": {
            "type": "string",
            "enum": [
              "gregorian",
              "hijri"
            ],
            "title": "To Calendar",
            "description": "Target calendar"
          }
        },
        "type": "object",
        "required": [
          "date",
          "from_calendar",
          "to_calendar"
        ],
        "title": "DateConversionRequest",
        "description": "Request schema for date conversion.",
        "example": {
          "date": "2025-10-25",
          "from_calendar": "gregorian",
          "to_calendar": "hijri"
        }
      },
      "DateConversionResponse": {
        "properties": {
          "original_date": {
            "type": "string",
            "title": "Original Date"
          },
          "converted_date": {
            "type": "string",
            "title": "Converted Date"
          },
          "from_calendar": {
            "type": "string",
            "title": "From Calendar"
          },
          "to_calendar": {
            "type": "string",
            "title": "To Calendar"
          }
        },
        "type": "object",
        "required": [
          "original_date",
          "converted_date",
          "from_calendar",
          "to_calendar"
        ],
        "title": "DateConversionResponse",
        "description": "Response schema for date conversion.",
        "example": {
          "converted_date": "1447-04-22",
          "from_calendar": "gregorian",
          "original_date": "2025-10-25",
          "to_calendar": "hijri"
        }
      },
      "DetailedHealthResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp"
          },
          "version": {
            "type": "string",
            "title": "Version"
          },
          "environment": {
            "type": "string",
            "title": "Environment"
          },
          "services": {
            "additionalProperties": {
              "additionalProperties": {
                "type": "string"
              },
              "type": "object"
            },
            "type": "object",
            "title": "Services"
          }
        },
        "type": "object",
        "required": [
          "status",
          "timestamp",
          "version",
          "environment",
          "services"
        ],
        "title": "DetailedHealthResponse",
        "description": "Detailed health check response."
      },
      "DocumentResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "title": {
            "type": "string",
            "title": "Title"
          },
          "document_type": {
            "type": "string",
            "title": "Document Type"
          },
          "primary_category": {
            "type": "string",
            "title": "Primary Category"
          },
          "language": {
            "type": "string",
            "title": "Language"
          },
          "author": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Author"
          },
          "source_reference": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Reference"
          },
          "total_characters": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Characters"
          },
          "chunk_count": {
            "type": "integer",
            "title": "Chunk Count"
          },
          "processing_status": {
            "type": "string",
            "title": "Processing Status"
          },
          "chunking_method": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chunking Method"
          },
          "uploaded_at": {
            "type": "string",
            "format": "date-time",
            "title": "Uploaded At"
          },
          "processed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Processed At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "title",
          "document_type",
          "primary_category",
          "language",
          "author",
          "source_reference",
          "total_characters",
          "chunk_count",
          "processing_status",
          "chunking_method",
          "uploaded_at",
          "processed_at"
        ],
        "title": "DocumentResponse",
        "description": "Document response schema."
      },
      "DocumentUploadRequest": {
        "properties": {
          "title": {
            "type": "string",
            "maxLength": 500,
            "minLength": 1,
            "title": "Title"
          },
          "content": {
            "type": "string",
            "minLength": 1,
            "title": "Content"
          },
          "document_type": {
            "type": "string",
            "pattern": "^(hadith|quran|tafsir|fiqh|book|article|fatwa|doubts_response|rejal|other)$",
            "title": "Document Type"
          },
          "primary_category": {
            "type": "string",
            "pattern": "^(aqidah|fiqh|akhlaq|tafsir|history|doubts|rejal|general)$",
            "title": "Primary Category"
          },
          "language": {
            "type": "string",
            "pattern": "^(fa|ar|en|ur)$",
            "title": "Language",
            "default": "fa"
          },
          "author": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255
              },
              {
                "type": "null"
              }
            ],
            "title": "Author"
          },
          "source_reference": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Reference"
          },
          "chunking_strategy": {
            "type": "string",
            "pattern": "^(semantic|token|sentence|adaptive)$",
            "title": "Chunking Strategy",
            "default": "semantic"
          },
          "chunk_size": {
            "type": "integer",
            "maximum": 2000.0,
            "minimum": 100.0,
            "title": "Chunk Size",
            "default": 768
          },
          "chunk_overlap": {
            "type": "integer",
            "maximum": 500.0,
            "minimum": 0.0,
            "title": "Chunk Overlap",
            "default": 150
          }
        },
        "type": "object",
        "required": [
          "title",
          "content",
          "document_type",
          "primary_category"
        ],
        "title": "DocumentUploadRequest",
        "description": "Document upload request."
      },
      "DocumentUploadResponse": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "default": "DOCUMENT_UPLOAD_SUCCESS"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "document": {
            "$ref": "#/components/schemas/DocumentResponse"
          }
        },
        "type": "object",
        "required": [
          "message",
          "document"
        ],
        "title": "DocumentUploadResponse",
        "description": "Document upload response."
      },
      "EmailVerificationRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "otp_code": {
            "type": "string",
            "maxLength": 6,
            "minLength": 6,
            "title": "Otp Code"
          }
        },
        "type": "object",
        "required": [
          "email",
          "otp_code"
        ],
        "title": "EmailVerificationRequest",
        "description": "Email verification request."
      },
      "EmailVerificationResponse": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "default": "AUTH_EMAIL_VERIFIED"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "email": {
            "type": "string",
            "title": "Email"
          },
          "is_verified": {
            "type": "boolean",
            "title": "Is Verified",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "message",
          "email"
        ],
        "title": "EmailVerificationResponse",
        "description": "Email verification response."
      },
      "EmbeddingsGenerationRequest": {
        "properties": {
          "document_id": {
            "type": "string",
            "format": "uuid",
            "title": "Document Id"
          }
        },
        "type": "object",
        "required": [
          "document_id"
        ],
        "title": "EmbeddingsGenerationRequest",
        "description": "Request to generate embeddings for a document."
      },
      "EmbeddingsGenerationResponse": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "default": "EMBEDDINGS_GENERATION_SUCCESS"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "document_id": {
            "type": "string",
            "format": "uuid",
            "title": "Document Id"
          },
          "embeddings_count": {
            "type": "integer",
            "title": "Embeddings Count"
          }
        },
        "type": "object",
        "required": [
          "message",
          "document_id",
          "embeddings_count"
        ],
        "title": "EmbeddingsGenerationResponse",
        "description": "Embeddings generation response."
      },
      "FeedbackRequest": {
        "properties": {
          "message_id": {
            "type": "string",
            "format": "uuid",
            "title": "Message Id",
            "description": "ID of the message being rated"
          },
          "feedback_type": {
            "type": "string",
            "enum": [
              "like",
              "dislike"
            ],
            "title": "Feedback Type",
            "description": "Type of feedback"
          },
          "dislike_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Dislike Reason",
            "description": "Reason for dislike"
          },
          "feedback_text": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 5000
              },
              {
                "type": "null"
              }
            ],
            "title": "Feedback Text",
            "description": "Detailed feedback"
          },
          "was_helpful": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Was Helpful",
            "description": "Was the response helpful?"
          }
        },
        "type": "object",
        "required": [
          "message_id",
          "feedback_type"
        ],
        "title": "FeedbackRequest",
        "description": "User feedback submission request."
      },
      "FeedbackResponse": {
        "properties": {
          "feedback_id": {
            "type": "string",
            "format": "uuid",
            "title": "Feedback Id"
          },
          "message_id": {
            "type": "string",
            "format": "uuid",
            "title": "Message Id"
          },
          "feedback_type": {
            "type": "string",
            "title": "Feedback Type"
          },
          "score": {
            "type": "number",
            "title": "Score"
          },
          "langfuse_submitted": {
            "type": "boolean",
            "title": "Langfuse Submitted"
          }
        },
        "type": "object",
        "required": [
          "feedback_id",
          "message_id",
          "feedback_type",
          "score",
          "langfuse_submitted"
        ],
        "title": "FeedbackResponse",
        "description": "Feedback submission response."
      },
      "FileInfoResponse": {
        "properties": {
          "file_id": {
            "type": "string",
            "format": "uuid",
            "title": "File Id"
          },
          "filename": {
            "type": "string",
            "title": "Filename"
          },
          "original_filename": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Original Filename"
          },
          "url": {
            "type": "string",
            "title": "Url"
          },
          "bucket": {
            "type": "string",
            "title": "Bucket"
          },
          "object_name": {
            "type": "string",
            "title": "Object Name"
          },
          "file_type": {
            "type": "string",
            "title": "File Type"
          },
          "mime_type": {
            "type": "string",
            "title": "Mime Type"
          },
          "file_size_bytes": {
            "type": "integer",
            "title": "File Size Bytes"
          },
          "is_public": {
            "type": "boolean",
            "title": "Is Public"
          },
          "download_count": {
            "type": "integer",
            "title": "Download Count"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "file_id",
          "filename",
          "original_filename",
          "url",
          "bucket",
          "object_name",
          "file_type",
          "mime_type",
          "file_size_bytes",
          "is_public",
          "download_count",
          "created_at"
        ],
        "title": "FileInfoResponse",
        "description": "File information response."
      },
      "FileUploadResponse": {
        "properties": {
          "file_id": {
            "type": "string",
            "format": "uuid",
            "title": "File Id"
          },
          "filename": {
            "type": "string",
            "title": "Filename"
          },
          "url": {
            "type": "string",
            "title": "Url"
          },
          "bucket": {
            "type": "string",
            "title": "Bucket"
          },
          "file_type": {
            "type": "string",
            "title": "File Type"
          },
          "file_size_bytes": {
            "type": "integer",
            "title": "File Size Bytes"
          },
          "mime_type": {
            "type": "string",
            "title": "Mime Type"
          }
        },
        "type": "object",
        "required": [
          "file_id",
          "filename",
          "url",
          "bucket",
          "file_type",
          "file_size_bytes",
          "mime_type"
        ],
        "title": "FileUploadResponse",
        "description": "File upload response."
      },
      "GoogleOAuthRequest": {
        "properties": {
          "id_token": {
            "type": "string",
            "title": "Id Token"
          },
          "access_token": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Access Token"
          }
        },
        "type": "object",
        "required": [
          "id_token"
        ],
        "title": "GoogleOAuthRequest",
        "description": "Google OAuth login request."
      },
      "GoogleOAuthResponse": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "default": "AUTH_OAUTH_SUCCESS"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "user": {
            "$ref": "#/components/schemas/UserResponse"
          },
          "tokens": {
            "$ref": "#/components/schemas/TokenResponse"
          },
          "is_new_user": {
            "type": "boolean",
            "title": "Is New User",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "message",
          "user",
          "tokens"
        ],
        "title": "GoogleOAuthResponse",
        "description": "Google OAuth response."
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "HadithResult": {
        "properties": {
          "hadith_id": {
            "type": "string",
            "title": "Hadith Id"
          },
          "collection": {
            "type": "string",
            "title": "Collection"
          },
          "reference": {
            "type": "string",
            "title": "Reference"
          },
          "text": {
            "type": "string",
            "title": "Text"
          },
          "narrator_chain": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Narrator Chain"
          },
          "reliability": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reliability"
          }
        },
        "type": "object",
        "required": [
          "hadith_id",
          "collection",
          "reference",
          "text"
        ],
        "title": "HadithResult",
        "description": "Single hadith result.",
        "example": {
          "collection": "Sahih al-Kafi",
          "hadith_id": "123e4567-e89b-12d3-a456-426614174000",
          "narrator_chain": [
            "Ali ibn Abi Talib",
            "Muhammad ibn Ya'qub"
          ],
          "reference": "al-Kafi 1:23",
          "reliability": "sahih",
          "text": "The Prophet (PBUH) said: Prayer is the pillar of religion..."
        }
      },
      "HadithSearchRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 200,
            "minLength": 3,
            "title": "Query",
            "description": "Search query"
          },
          "search_type": {
            "type": "string",
            "enum": [
              "reference",
              "text",
              "narrator"
            ],
            "title": "Search Type",
            "description": "Type of search",
            "default": "text"
          },
          "collection": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Collection",
            "description": "Hadith collection (e.g., 'Sahih al-Kafi')"
          },
          "limit": {
            "type": "integer",
            "maximum": 50.0,
            "minimum": 1.0,
            "title": "Limit",
            "description": "Maximum results",
            "default": 10
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "HadithSearchRequest",
        "description": "Request schema for Hadith search.",
        "example": {
          "collection": "Sahih al-Kafi",
          "limit": 10,
          "query": "prayer",
          "search_type": "text"
        }
      },
      "HadithSearchResponse": {
        "properties": {
          "query": {
            "type": "string",
            "title": "Query"
          },
          "search_type": {
            "type": "string",
            "title": "Search Type"
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/HadithResult"
            },
            "type": "array",
            "title": "Results"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          }
        },
        "type": "object",
        "required": [
          "query",
          "search_type",
          "results",
          "total_count"
        ],
        "title": "HadithSearchResponse",
        "description": "Response schema for Hadith search.",
        "example": {
          "query": "prayer",
          "results": [],
          "search_type": "text",
          "total_count": 15
        }
      },
      "HealthResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status"
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp"
          },
          "version": {
            "type": "string",
            "title": "Version"
          },
          "environment": {
            "type": "string",
            "title": "Environment"
          }
        },
        "type": "object",
        "required": [
          "status",
          "timestamp",
          "version",
          "environment"
        ],
        "title": "HealthResponse",
        "description": "Health check response."
      },
      "ImageGenerationRequest": {
        "properties": {
          "prompt": {
            "type": "string",
            "maxLength": 2000,
            "minLength": 1,
            "title": "Prompt",
            "description": "Image generation prompt"
          },
          "conversation_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Conversation Id",
            "description": "Optional conversation ID"
          },
          "model": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Model",
            "description": "Model to use (default from settings)"
          },
          "aspect_ratio": {
            "type": "string",
            "title": "Aspect Ratio",
            "description": "Image aspect ratio (1:1, 16:9, 9:16, etc.)",
            "default": "1:1"
          },
          "output_format": {
            "type": "string",
            "title": "Output Format",
            "description": "Output format (url or base64)",
            "default": "url"
          }
        },
        "type": "object",
        "required": [
          "prompt"
        ],
        "title": "ImageGenerationRequest",
        "description": "Image generation request."
      },
      "ImageListResponse": {
        "properties": {
          "images": {
            "items": {
              "$ref": "#/components/schemas/ImageResponse"
            },
            "type": "array",
            "title": "Images"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "images",
          "total"
        ],
        "title": "ImageListResponse",
        "description": "List of generated images."
      },
      "ImageResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Url"
          },
          "b64_json": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "B64 Json"
          },
          "model": {
            "type": "string",
            "title": "Model"
          },
          "prompt": {
            "type": "string",
            "title": "Prompt"
          },
          "aspect_ratio": {
            "type": "string",
            "title": "Aspect Ratio"
          },
          "cost_usd": {
            "type": "number",
            "title": "Cost Usd"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "model",
          "prompt",
          "aspect_ratio",
          "cost_usd",
          "created_at"
        ],
        "title": "ImageResponse",
        "description": "Image generation response."
      },
      "KhumsRequest": {
        "properties": {
          "annual_income": {
            "type": "number",
            "exclusiveMinimum": 0.0,
            "title": "Annual Income",
            "description": "Total annual income"
          },
          "annual_expenses": {
            "type": "number",
            "minimum": 0.0,
            "title": "Annual Expenses",
            "description": "Total annual expenses"
          },
          "currency": {
            "type": "string",
            "title": "Currency",
            "description": "Currency code",
            "default": "USD"
          }
        },
        "type": "object",
        "required": [
          "annual_income",
          "annual_expenses"
        ],
        "title": "KhumsRequest",
        "description": "Request schema for Khums calculation.",
        "example": {
          "annual_expenses": 30000.0,
          "annual_income": 50000.0,
          "currency": "USD"
        }
      },
      "KhumsResponse": {
        "properties": {
          "annual_income": {
            "type": "number",
            "title": "Annual Income"
          },
          "annual_expenses": {
            "type": "number",
            "title": "Annual Expenses"
          },
          "net_savings": {
            "type": "number",
            "title": "Net Savings"
          },
          "khums_amount": {
            "type": "number",
            "title": "Khums Amount"
          },
          "currency": {
            "type": "string",
            "title": "Currency"
          },
          "warning": {
            "type": "string",
            "title": "Warning"
          },
          "verification_required": {
            "type": "boolean",
            "title": "Verification Required",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "annual_income",
          "annual_expenses",
          "net_savings",
          "khums_amount",
          "currency",
          "warning"
        ],
        "title": "KhumsResponse",
        "description": "Response schema for Khums calculation.",
        "example": {
          "annual_expenses": 30000.0,
          "annual_income": 50000.0,
          "currency": "USD",
          "khums_amount": 4000.0,
          "net_savings": 20000.0,
          "verification_required": true,
          "warning": "\u26a0\ufe0f\u26a0\ufe0f\u26a0\ufe0f CRITICAL WARNING \u26a0\ufe0f\u26a0\ufe0f\u26a0\ufe0f..."
        }
      },
      "LeaderboardEntry": {
        "properties": {
          "rank": {
            "type": "integer",
            "title": "Rank"
          },
          "user_id": {
            "type": "string",
            "title": "User Id"
          },
          "display_name": {
            "type": "string",
            "title": "Display Name"
          },
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "upload_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Upload Count"
          },
          "message_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message Count"
          },
          "conversation_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Conversation Count"
          },
          "total_score": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Score"
          },
          "breakdown": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Breakdown"
          }
        },
        "type": "object",
        "required": [
          "rank",
          "user_id",
          "display_name",
          "email"
        ],
        "title": "LeaderboardEntry",
        "description": "Single leaderboard entry."
      },
      "LeaderboardResponse": {
        "properties": {
          "leaderboard": {
            "items": {
              "$ref": "#/components/schemas/LeaderboardEntry"
            },
            "type": "array",
            "title": "Leaderboard"
          },
          "timeframe": {
            "type": "string",
            "title": "Timeframe"
          },
          "generated_at": {
            "type": "string",
            "title": "Generated At"
          }
        },
        "type": "object",
        "required": [
          "leaderboard",
          "timeframe",
          "generated_at"
        ],
        "title": "LeaderboardResponse",
        "description": "Response schema for leaderboard."
      },
      "LogoutResponse": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "default": "AUTH_LOGOUT_SUCCESS"
          },
          "message": {
            "type": "string",
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "message"
        ],
        "title": "LogoutResponse",
        "description": "Logout response."
      },
      "MessageResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "role": {
            "type": "string",
            "title": "Role"
          },
          "content": {
            "type": "string",
            "title": "Content"
          },
          "model_used": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Model Used"
          },
          "tokens_used": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tokens Used"
          },
          "cached_tokens_read": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cached Tokens Read"
          },
          "cache_discount_usd": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cache Discount Usd"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "role",
          "content",
          "model_used",
          "tokens_used",
          "cached_tokens_read",
          "cache_discount_usd",
          "created_at"
        ],
        "title": "MessageResponse",
        "description": "Message response."
      },
      "ModelUsageResponse": {
        "properties": {
          "model": {
            "type": "string",
            "title": "Model"
          },
          "message_count": {
            "type": "integer",
            "title": "Message Count"
          },
          "total_tokens": {
            "type": "integer",
            "title": "Total Tokens"
          },
          "average_tokens_per_message": {
            "type": "number",
            "title": "Average Tokens Per Message"
          },
          "total_cost_usd": {
            "type": "number",
            "title": "Total Cost Usd"
          }
        },
        "type": "object",
        "required": [
          "model",
          "message_count",
          "total_tokens",
          "average_tokens_per_message",
          "total_cost_usd"
        ],
        "title": "ModelUsageResponse",
        "description": "Model usage statistics."
      },
      "ModerateContentRequest": {
        "properties": {
          "action": {
            "type": "string",
            "enum": [
              "approve",
              "reject"
            ],
            "title": "Action"
          },
          "reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reason",
            "description": "Required for reject action"
          }
        },
        "type": "object",
        "required": [
          "action"
        ],
        "title": "ModerateContentRequest",
        "description": "Request schema for moderating content.",
        "example": {
          "action": "reject",
          "reason": "Content does not meet quality standards"
        }
      },
      "ModerateContentResponse": {
        "properties": {
          "content_id": {
            "type": "string",
            "title": "Content Id"
          },
          "content_type": {
            "type": "string",
            "title": "Content Type"
          },
          "action": {
            "type": "string",
            "title": "Action"
          },
          "reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reason"
          },
          "moderated_by": {
            "type": "string",
            "title": "Moderated By"
          },
          "moderated_at": {
            "type": "string",
            "title": "Moderated At"
          }
        },
        "type": "object",
        "required": [
          "content_id",
          "content_type",
          "action",
          "reason",
          "moderated_by",
          "moderated_at"
        ],
        "title": "ModerateContentResponse",
        "description": "Response schema for content moderation."
      },
      "MultiToolQueryRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 500,
            "minLength": 10,
            "title": "Query",
            "description": "User query"
          },
          "user_context": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Context",
            "description": "User context (marja_preference, city, country, etc.)"
          },
          "execution_mode": {
            "type": "string",
            "enum": [
              "parallel",
              "sequential"
            ],
            "title": "Execution Mode",
            "description": "Execution mode",
            "default": "parallel"
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "MultiToolQueryRequest",
        "description": "Request schema for multi-tool query.",
        "example": {
          "execution_mode": "parallel",
          "query": "What is the ruling on zakat and when are prayer times in Tehran?",
          "user_context": {
            "city": "Tehran",
            "country": "Iran",
            "marja_preference": "Khamenei"
          }
        }
      },
      "MultiToolQueryResponse": {
        "properties": {
          "query": {
            "type": "string",
            "title": "Query"
          },
          "query_type": {
            "type": "string",
            "title": "Query Type"
          },
          "tools_used": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Tools Used"
          },
          "results": {
            "type": "object",
            "title": "Results"
          },
          "execution_summary": {
            "type": "object",
            "title": "Execution Summary"
          }
        },
        "type": "object",
        "required": [
          "query",
          "query_type",
          "tools_used",
          "results",
          "execution_summary"
        ],
        "title": "MultiToolQueryResponse",
        "description": "Response schema for multi-tool query.",
        "example": {
          "execution_summary": {
            "failed": 0,
            "successful": 2,
            "total_tools": 2
          },
          "query": "What is the ruling on zakat and when are prayer times in Tehran?",
          "query_type": "multi_tool",
          "results": {
            "ahkam": {
              "question": "...",
              "ruling": "..."
            },
            "datetime": {
              "prayer_times": {
                "fajr": "05:30"
              }
            }
          },
          "tools_used": [
            "ahkam",
            "datetime"
          ]
        }
      },
      "PasswordResetConfirmRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "otp_code": {
            "type": "string",
            "maxLength": 6,
            "minLength": 6,
            "title": "Otp Code"
          },
          "new_password": {
            "type": "string",
            "maxLength": 100,
            "minLength": 8,
            "title": "New Password"
          }
        },
        "type": "object",
        "required": [
          "email",
          "otp_code",
          "new_password"
        ],
        "title": "PasswordResetConfirmRequest",
        "description": "Password reset confirm request (step 2: submit new password with OTP)."
      },
      "PasswordResetConfirmResponse": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "default": "AUTH_PASSWORD_RESET_SUCCESS"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "email": {
            "type": "string",
            "title": "Email"
          }
        },
        "type": "object",
        "required": [
          "message",
          "email"
        ],
        "title": "PasswordResetConfirmResponse",
        "description": "Password reset confirm response."
      },
      "PasswordResetRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          }
        },
        "type": "object",
        "required": [
          "email"
        ],
        "title": "PasswordResetRequest",
        "description": "Password reset request (step 1: request OTP)."
      },
      "PasswordResetResponse": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "default": "AUTH_PASSWORD_RESET_OTP_SENT"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "email": {
            "type": "string",
            "title": "Email"
          }
        },
        "type": "object",
        "required": [
          "message",
          "email"
        ],
        "title": "PasswordResetResponse",
        "description": "Password reset response."
      },
      "PendingContentItem": {
        "properties": {
          "content_id": {
            "type": "string",
            "title": "Content Id"
          },
          "content_type": {
            "type": "string",
            "title": "Content Type"
          },
          "title": {
            "type": "string",
            "title": "Title"
          },
          "uploaded_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uploaded By"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          },
          "moderation_status": {
            "type": "string",
            "title": "Moderation Status"
          }
        },
        "type": "object",
        "required": [
          "content_id",
          "content_type",
          "title",
          "uploaded_by",
          "created_at",
          "moderation_status"
        ],
        "title": "PendingContentItem",
        "description": "Pending content item."
      },
      "PlanDistributionResponse": {
        "properties": {
          "plan_type": {
            "type": "string",
            "title": "Plan Type"
          },
          "user_count": {
            "type": "integer",
            "title": "User Count"
          },
          "percentage": {
            "type": "number",
            "title": "Percentage"
          }
        },
        "type": "object",
        "required": [
          "plan_type",
          "user_count",
          "percentage"
        ],
        "title": "PlanDistributionResponse",
        "description": "Plan distribution statistics."
      },
      "PlanLimitResponse": {
        "properties": {
          "plan_type": {
            "type": "string",
            "title": "Plan Type"
          },
          "max_messages_per_month": {
            "type": "integer",
            "title": "Max Messages Per Month"
          },
          "max_tokens_per_month": {
            "type": "integer",
            "title": "Max Tokens Per Month"
          },
          "max_images_per_month": {
            "type": "integer",
            "title": "Max Images Per Month"
          },
          "max_documents_per_month": {
            "type": "integer",
            "title": "Max Documents Per Month"
          },
          "max_audio_minutes_per_month": {
            "type": "integer",
            "title": "Max Audio Minutes Per Month"
          },
          "web_search_enabled": {
            "type": "boolean",
            "title": "Web Search Enabled"
          },
          "image_generation_enabled": {
            "type": "boolean",
            "title": "Image Generation Enabled"
          },
          "pdf_processing_enabled": {
            "type": "boolean",
            "title": "Pdf Processing Enabled"
          },
          "audio_processing_enabled": {
            "type": "boolean",
            "title": "Audio Processing Enabled"
          },
          "prompt_caching_enabled": {
            "type": "boolean",
            "title": "Prompt Caching Enabled"
          },
          "advanced_models_enabled": {
            "type": "boolean",
            "title": "Advanced Models Enabled"
          },
          "presets_limit": {
            "type": "integer",
            "title": "Presets Limit"
          },
          "max_context_length": {
            "type": "integer",
            "title": "Max Context Length"
          },
          "priority_support": {
            "type": "boolean",
            "title": "Priority Support"
          },
          "monthly_price_usd": {
            "type": "number",
            "title": "Monthly Price Usd"
          },
          "yearly_price_usd": {
            "type": "number",
            "title": "Yearly Price Usd"
          }
        },
        "type": "object",
        "required": [
          "plan_type",
          "max_messages_per_month",
          "max_tokens_per_month",
          "max_images_per_month",
          "max_documents_per_month",
          "max_audio_minutes_per_month",
          "web_search_enabled",
          "image_generation_enabled",
          "pdf_processing_enabled",
          "audio_processing_enabled",
          "prompt_caching_enabled",
          "advanced_models_enabled",
          "presets_limit",
          "max_context_length",
          "priority_support",
          "monthly_price_usd",
          "yearly_price_usd"
        ],
        "title": "PlanLimitResponse",
        "description": "Plan limit response."
      },
      "PlanListResponse": {
        "properties": {
          "plans": {
            "items": {
              "$ref": "#/components/schemas/PlanLimitResponse"
            },
            "type": "array",
            "title": "Plans"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "plans",
          "total"
        ],
        "title": "PlanListResponse",
        "description": "List of available plans."
      },
      "PrayerTimesRequest": {
        "properties": {
          "city": {
            "type": "string",
            "maxLength": 100,
            "minLength": 2,
            "title": "City",
            "description": "City name"
          },
          "country": {
            "type": "string",
            "maxLength": 100,
            "minLength": 2,
            "title": "Country",
            "description": "Country name"
          },
          "date": {
            "anyOf": [
              {
                "type": "string",
                "format": "date"
              },
              {
                "type": "null"
              }
            ],
            "title": "Date",
            "description": "Date (defaults to today)"
          }
        },
        "type": "object",
        "required": [
          "city",
          "country"
        ],
        "title": "PrayerTimesRequest",
        "description": "Request schema for prayer times.",
        "example": {
          "city": "Tehran",
          "country": "Iran",
          "date": "2025-10-25"
        }
      },
      "PrayerTimesResponse": {
        "properties": {
          "city": {
            "type": "string",
            "title": "City"
          },
          "country": {
            "type": "string",
            "title": "Country"
          },
          "prayer_date": {
            "type": "string",
            "format": "date",
            "title": "Prayer Date"
          },
          "prayer_times": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Prayer Times"
          },
          "timezone": {
            "type": "string",
            "title": "Timezone"
          },
          "calculation_method": {
            "type": "string",
            "title": "Calculation Method"
          }
        },
        "type": "object",
        "required": [
          "city",
          "country",
          "prayer_date",
          "prayer_times",
          "timezone",
          "calculation_method"
        ],
        "title": "PrayerTimesResponse",
        "description": "Response schema for prayer times.",
        "example": {
          "calculation_method": "Institute of Geophysics, University of Tehran",
          "city": "Tehran",
          "country": "Iran",
          "date": "2025-10-25",
          "prayer_times": {
            "asr": "15:45",
            "dhuhr": "12:30",
            "fajr": "05:30",
            "isha": "19:30",
            "maghrib": "18:15",
            "sunrise": "07:00"
          },
          "timezone": "Asia/Tehran"
        }
      },
      "PresetCreateRequest": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Name",
            "description": "Preset name"
          },
          "slug": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Slug",
            "description": "URL-friendly identifier"
          },
          "model": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Model",
            "description": "Model identifier"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Optional description"
          },
          "system_prompt": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "System Prompt",
            "description": "Optional system prompt template"
          },
          "temperature": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 2.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Temperature",
            "description": "Temperature (0.0-2.0)"
          },
          "top_p": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Top P",
            "description": "Top P (0.0-1.0)"
          },
          "max_tokens": {
            "anyOf": [
              {
                "type": "integer",
                "exclusiveMinimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Tokens",
            "description": "Maximum tokens"
          },
          "extra_model_config": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Extra Model Config",
            "description": "Additional model configuration"
          },
          "provider_preferences": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider Preferences",
            "description": "Provider routing preferences"
          },
          "is_public": {
            "type": "boolean",
            "title": "Is Public",
            "description": "Make preset publicly shareable",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "name",
          "slug",
          "model"
        ],
        "title": "PresetCreateRequest",
        "description": "Preset creation request."
      },
      "PresetDuplicateRequest": {
        "properties": {
          "new_name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "New Name",
            "description": "Name for duplicated preset"
          },
          "new_slug": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "New Slug",
            "description": "Slug for duplicated preset"
          }
        },
        "type": "object",
        "required": [
          "new_name",
          "new_slug"
        ],
        "title": "PresetDuplicateRequest",
        "description": "Preset duplication request."
      },
      "PresetListResponse": {
        "properties": {
          "presets": {
            "items": {
              "$ref": "#/components/schemas/PresetResponse"
            },
            "type": "array",
            "title": "Presets"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "presets",
          "total"
        ],
        "title": "PresetListResponse",
        "description": "List of presets."
      },
      "PresetResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "user_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "slug": {
            "type": "string",
            "title": "Slug"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "model": {
            "type": "string",
            "title": "Model"
          },
          "system_prompt": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "System Prompt"
          },
          "temperature": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Temperature"
          },
          "top_p": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Top P"
          },
          "max_tokens": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Tokens"
          },
          "extra_model_config": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Extra Model Config"
          },
          "provider_preferences": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider Preferences"
          },
          "is_public": {
            "type": "boolean",
            "title": "Is Public"
          },
          "version": {
            "type": "integer",
            "title": "Version"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_id",
          "name",
          "slug",
          "description",
          "model",
          "system_prompt",
          "temperature",
          "top_p",
          "max_tokens",
          "extra_model_config",
          "provider_preferences",
          "is_public",
          "version",
          "created_at",
          "updated_at"
        ],
        "title": "PresetResponse",
        "description": "Preset response."
      },
      "PresetUpdateRequest": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "model": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Model"
          },
          "system_prompt": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "System Prompt"
          },
          "temperature": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 2.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Temperature"
          },
          "top_p": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Top P"
          },
          "max_tokens": {
            "anyOf": [
              {
                "type": "integer",
                "exclusiveMinimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Tokens"
          },
          "extra_model_config": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Extra Model Config"
          },
          "provider_preferences": {
            "anyOf": [
              {
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider Preferences"
          },
          "is_public": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Public"
          }
        },
        "type": "object",
        "title": "PresetUpdateRequest",
        "description": "Preset update request."
      },
      "ReadinessResponse": {
        "properties": {
          "ready": {
            "type": "boolean",
            "title": "Ready"
          },
          "checks": {
            "additionalProperties": {
              "type": "boolean"
            },
            "type": "object",
            "title": "Checks"
          }
        },
        "type": "object",
        "required": [
          "ready",
          "checks"
        ],
        "title": "ReadinessResponse",
        "description": "Readiness check response."
      },
      "RegenerateSecretResponse": {
        "properties": {
          "client_id": {
            "type": "string",
            "title": "Client Id"
          },
          "api_secret": {
            "type": "string",
            "title": "Api Secret"
          },
          "regenerated_at": {
            "type": "string",
            "title": "Regenerated At"
          },
          "warning": {
            "type": "string",
            "title": "Warning"
          }
        },
        "type": "object",
        "required": [
          "client_id",
          "api_secret",
          "regenerated_at",
          "warning"
        ],
        "title": "RegenerateSecretResponse",
        "description": "Response schema for secret regeneration."
      },
      "RegisterClientRequest": {
        "properties": {
          "app_name": {
            "type": "string",
            "maxLength": 100,
            "minLength": 3,
            "title": "App Name",
            "description": "Application name"
          },
          "app_description": {
            "type": "string",
            "maxLength": 500,
            "minLength": 10,
            "title": "App Description",
            "description": "Application description"
          },
          "callback_url": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 2083,
                "minLength": 1,
                "format": "uri"
              },
              {
                "type": "null"
              }
            ],
            "title": "Callback Url",
            "description": "OAuth callback URL"
          },
          "allowed_origins": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Allowed Origins",
            "description": "CORS allowed origins"
          },
          "rate_limit_per_minute": {
            "type": "integer",
            "maximum": 1000.0,
            "minimum": 1.0,
            "title": "Rate Limit Per Minute",
            "description": "Requests per minute",
            "default": 60
          },
          "rate_limit_per_day": {
            "type": "integer",
            "maximum": 1000000.0,
            "minimum": 1.0,
            "title": "Rate Limit Per Day",
            "description": "Requests per day",
            "default": 10000
          }
        },
        "type": "object",
        "required": [
          "app_name",
          "app_description"
        ],
        "title": "RegisterClientRequest",
        "description": "Request schema for registering external API client.",
        "example": {
          "allowed_origins": [
            "https://myapp.com",
            "https://app.myapp.com"
          ],
          "app_description": "Mobile app for Islamic education",
          "app_name": "My Islamic App",
          "callback_url": "https://myapp.com/oauth/callback",
          "rate_limit_per_day": 10000,
          "rate_limit_per_minute": 60
        }
      },
      "RegisterClientResponse": {
        "properties": {
          "client_id": {
            "type": "string",
            "title": "Client Id"
          },
          "app_name": {
            "type": "string",
            "title": "App Name"
          },
          "api_key": {
            "type": "string",
            "title": "Api Key"
          },
          "api_secret": {
            "type": "string",
            "title": "Api Secret"
          },
          "rate_limit_per_minute": {
            "type": "integer",
            "title": "Rate Limit Per Minute"
          },
          "rate_limit_per_day": {
            "type": "integer",
            "title": "Rate Limit Per Day"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          },
          "warning": {
            "type": "string",
            "title": "Warning"
          }
        },
        "type": "object",
        "required": [
          "client_id",
          "app_name",
          "api_key",
          "api_secret",
          "rate_limit_per_minute",
          "rate_limit_per_day",
          "created_at",
          "warning"
        ],
        "title": "RegisterClientResponse",
        "description": "Response schema for client registration."
      },
      "ResendOTPRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "purpose": {
            "type": "string",
            "pattern": "^(email_verification|password_reset)$",
            "title": "Purpose"
          }
        },
        "type": "object",
        "required": [
          "email",
          "purpose"
        ],
        "title": "ResendOTPRequest",
        "description": "Resend OTP request."
      },
      "ResendOTPResponse": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "default": "AUTH_OTP_SENT"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "email": {
            "type": "string",
            "title": "Email"
          },
          "expires_at": {
            "type": "string",
            "format": "date-time",
            "title": "Expires At"
          }
        },
        "type": "object",
        "required": [
          "message",
          "email",
          "expires_at"
        ],
        "title": "ResendOTPResponse",
        "description": "Resend OTP response."
      },
      "RevokeAPIKeyResponse": {
        "properties": {
          "api_key_id": {
            "type": "string",
            "title": "Api Key Id"
          },
          "key_name": {
            "type": "string",
            "title": "Key Name"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "revoked_at": {
            "type": "string",
            "title": "Revoked At"
          }
        },
        "type": "object",
        "required": [
          "api_key_id",
          "key_name",
          "status",
          "revoked_at"
        ],
        "title": "RevokeAPIKeyResponse",
        "description": "Response schema for revoking API key."
      },
      "SearchRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 1000,
            "minLength": 1,
            "title": "Query"
          },
          "limit": {
            "type": "integer",
            "maximum": 50.0,
            "minimum": 1.0,
            "title": "Limit",
            "default": 10
          },
          "score_threshold": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Score Threshold",
            "default": 0.7
          },
          "document_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Document Type"
          },
          "language": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Language"
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "SearchRequest",
        "description": "Semantic search request."
      },
      "SearchResponse": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "default": "SEARCH_SUCCESS"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "query": {
            "type": "string",
            "title": "Query"
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/SearchResult"
            },
            "type": "array",
            "title": "Results"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "message",
          "query",
          "results",
          "count"
        ],
        "title": "SearchResponse",
        "description": "Search response."
      },
      "SearchResult": {
        "properties": {
          "chunk_id": {
            "type": "string",
            "title": "Chunk Id"
          },
          "document_id": {
            "type": "string",
            "title": "Document Id"
          },
          "text": {
            "type": "string",
            "title": "Text"
          },
          "score": {
            "type": "number",
            "title": "Score"
          },
          "index": {
            "type": "integer",
            "title": "Index"
          }
        },
        "type": "object",
        "required": [
          "chunk_id",
          "document_id",
          "text",
          "score",
          "index"
        ],
        "title": "SearchResult",
        "description": "Search result item."
      },
      "StorageQuotaResponse": {
        "properties": {
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id"
          },
          "quota_limit_mb": {
            "type": "number",
            "title": "Quota Limit Mb"
          },
          "total_used_mb": {
            "type": "number",
            "title": "Total Used Mb"
          },
          "remaining_mb": {
            "type": "number",
            "title": "Remaining Mb"
          },
          "usage_percentage": {
            "type": "number",
            "title": "Usage Percentage"
          },
          "is_quota_exceeded": {
            "type": "boolean",
            "title": "Is Quota Exceeded"
          },
          "total_files": {
            "type": "integer",
            "title": "Total Files"
          },
          "breakdown": {
            "type": "object",
            "title": "Breakdown"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "quota_limit_mb",
          "total_used_mb",
          "remaining_mb",
          "usage_percentage",
          "is_quota_exceeded",
          "total_files",
          "breakdown"
        ],
        "title": "StorageQuotaResponse",
        "description": "User storage quota response."
      },
      "SubscriptionCreateRequest": {
        "properties": {
          "plan_type": {
            "type": "string",
            "title": "Plan Type",
            "description": "Plan type (free, premium, unlimited, enterprise)"
          },
          "billing_cycle": {
            "type": "string",
            "title": "Billing Cycle",
            "description": "Billing cycle (monthly, yearly)",
            "default": "monthly"
          },
          "trial_days": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trial Days",
            "description": "Optional trial period in days"
          }
        },
        "type": "object",
        "required": [
          "plan_type"
        ],
        "title": "SubscriptionCreateRequest",
        "description": "Subscription creation request."
      },
      "SubscriptionResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "user_id": {
            "type": "string",
            "title": "User Id"
          },
          "plan_type": {
            "type": "string",
            "title": "Plan Type"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "billing_cycle": {
            "type": "string",
            "title": "Billing Cycle"
          },
          "amount_usd": {
            "type": "number",
            "title": "Amount Usd"
          },
          "current_period_start": {
            "type": "string",
            "title": "Current Period Start"
          },
          "current_period_end": {
            "type": "string",
            "title": "Current Period End"
          },
          "cancel_at_period_end": {
            "type": "boolean",
            "title": "Cancel At Period End"
          },
          "cancelled_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cancelled At"
          },
          "trial_ends_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Trial Ends At"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "user_id",
          "plan_type",
          "status",
          "billing_cycle",
          "amount_usd",
          "current_period_start",
          "current_period_end",
          "cancel_at_period_end",
          "cancelled_at",
          "trial_ends_at",
          "created_at",
          "updated_at"
        ],
        "title": "SubscriptionResponse",
        "description": "Subscription response."
      },
      "SupportedLanguage": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "native_name": {
            "type": "string",
            "title": "Native Name"
          }
        },
        "type": "object",
        "required": [
          "code",
          "name",
          "native_name"
        ],
        "title": "SupportedLanguage",
        "description": "Supported language information."
      },
      "SupportedLanguagesResponse": {
        "properties": {
          "languages": {
            "items": {
              "$ref": "#/components/schemas/SupportedLanguage"
            },
            "type": "array",
            "title": "Languages"
          },
          "provider": {
            "type": "string",
            "title": "Provider"
          }
        },
        "type": "object",
        "required": [
          "languages",
          "provider"
        ],
        "title": "SupportedLanguagesResponse",
        "description": "Response schema for supported languages."
      },
      "SystemStatisticsResponse": {
        "properties": {
          "users": {
            "type": "object",
            "title": "Users"
          },
          "content": {
            "type": "object",
            "title": "Content"
          },
          "chat": {
            "type": "object",
            "title": "Chat"
          },
          "generated_at": {
            "type": "string",
            "title": "Generated At"
          }
        },
        "type": "object",
        "required": [
          "users",
          "content",
          "chat",
          "generated_at"
        ],
        "title": "SystemStatisticsResponse",
        "description": "Response schema for system statistics."
      },
      "SystemStatsResponse": {
        "properties": {
          "total_users": {
            "type": "integer",
            "title": "Total Users"
          },
          "active_users_30d": {
            "type": "integer",
            "title": "Active Users 30D"
          },
          "total_conversations": {
            "type": "integer",
            "title": "Total Conversations"
          },
          "total_messages": {
            "type": "integer",
            "title": "Total Messages"
          },
          "total_tokens_used": {
            "type": "integer",
            "title": "Total Tokens Used"
          },
          "total_images_generated": {
            "type": "integer",
            "title": "Total Images Generated"
          },
          "total_cost_usd": {
            "type": "number",
            "title": "Total Cost Usd"
          },
          "total_cache_savings_usd": {
            "type": "number",
            "title": "Total Cache Savings Usd"
          },
          "cache_hit_rate": {
            "type": "number",
            "title": "Cache Hit Rate"
          }
        },
        "type": "object",
        "required": [
          "total_users",
          "active_users_30d",
          "total_conversations",
          "total_messages",
          "total_tokens_used",
          "total_images_generated",
          "total_cost_usd",
          "total_cache_savings_usd",
          "cache_hit_rate"
        ],
        "title": "SystemStatsResponse",
        "description": "System-wide statistics."
      },
      "TicketDetailResponse": {
        "properties": {
          "ticket_id": {
            "type": "string",
            "title": "Ticket Id"
          },
          "user_id": {
            "type": "string",
            "title": "User Id"
          },
          "subject": {
            "type": "string",
            "title": "Subject"
          },
          "description": {
            "type": "string",
            "title": "Description"
          },
          "category": {
            "type": "string",
            "title": "Category"
          },
          "priority": {
            "type": "string",
            "title": "Priority"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "assigned_to": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Assigned To"
          },
          "resolution": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolution"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "title": "Updated At"
          },
          "resolved_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolved At"
          },
          "closed_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Closed At"
          },
          "responses": {
            "items": {
              "type": "object"
            },
            "type": "array",
            "title": "Responses"
          }
        },
        "type": "object",
        "required": [
          "ticket_id",
          "user_id",
          "subject",
          "description",
          "category",
          "priority",
          "status",
          "assigned_to",
          "resolution",
          "created_at",
          "updated_at",
          "resolved_at",
          "closed_at",
          "responses"
        ],
        "title": "TicketDetailResponse",
        "description": "Detailed ticket response with responses."
      },
      "TicketListResponse": {
        "properties": {
          "tickets": {
            "items": {
              "$ref": "#/components/schemas/TicketResponse"
            },
            "type": "array",
            "title": "Tickets"
          },
          "pagination": {
            "type": "object",
            "title": "Pagination"
          }
        },
        "type": "object",
        "required": [
          "tickets",
          "pagination"
        ],
        "title": "TicketListResponse",
        "description": "Paginated ticket list response."
      },
      "TicketResponse": {
        "properties": {
          "ticket_id": {
            "type": "string",
            "title": "Ticket Id"
          },
          "subject": {
            "type": "string",
            "title": "Subject"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "category": {
            "type": "string",
            "title": "Category"
          },
          "priority": {
            "type": "string",
            "title": "Priority"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          },
          "resolved_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolved At"
          }
        },
        "type": "object",
        "required": [
          "ticket_id",
          "subject",
          "category",
          "priority",
          "status",
          "created_at"
        ],
        "title": "TicketResponse",
        "description": "Response schema for ticket."
      },
      "TicketStatisticsResponse": {
        "properties": {
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "by_status": {
            "type": "object",
            "title": "By Status"
          },
          "resolution_rate": {
            "type": "number",
            "title": "Resolution Rate"
          }
        },
        "type": "object",
        "required": [
          "total",
          "by_status",
          "resolution_rate"
        ],
        "title": "TicketStatisticsResponse",
        "description": "Response schema for ticket statistics."
      },
      "TokenResponse": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token"
          },
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "default": "bearer"
          },
          "expires_in": {
            "type": "integer",
            "title": "Expires In"
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "refresh_token",
          "expires_in"
        ],
        "title": "TokenResponse",
        "description": "JWT token response."
      },
      "TopUsersResponse": {
        "properties": {
          "user_id": {
            "type": "string",
            "title": "User Id"
          },
          "email": {
            "type": "string",
            "title": "Email"
          },
          "messages_count": {
            "type": "integer",
            "title": "Messages Count"
          },
          "tokens_used": {
            "type": "integer",
            "title": "Tokens Used"
          },
          "images_generated": {
            "type": "integer",
            "title": "Images Generated"
          },
          "cost_usd": {
            "type": "number",
            "title": "Cost Usd"
          },
          "cache_savings_usd": {
            "type": "number",
            "title": "Cache Savings Usd"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "email",
          "messages_count",
          "tokens_used",
          "images_generated",
          "cost_usd",
          "cache_savings_usd"
        ],
        "title": "TopUsersResponse",
        "description": "Top users by usage."
      },
      "TranscribeAudioResponse": {
        "properties": {
          "text": {
            "type": "string",
            "title": "Text"
          },
          "language": {
            "type": "string",
            "title": "Language"
          },
          "duration": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duration"
          },
          "provider": {
            "type": "string",
            "title": "Provider"
          },
          "model": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Model"
          },
          "is_translation": {
            "type": "boolean",
            "title": "Is Translation",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "text",
          "language",
          "provider"
        ],
        "title": "TranscribeAudioResponse",
        "description": "Response schema for audio transcription."
      },
      "UnbanUserResponse": {
        "properties": {
          "user_id": {
            "type": "string",
            "title": "User Id"
          },
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "unbanned_at": {
            "type": "string",
            "title": "Unbanned At"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "email",
          "status",
          "unbanned_at"
        ],
        "title": "UnbanUserResponse",
        "description": "Response schema for unban action."
      },
      "UpdateClientRequest": {
        "properties": {
          "app_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 3
              },
              {
                "type": "null"
              }
            ],
            "title": "App Name"
          },
          "app_description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500,
                "minLength": 10
              },
              {
                "type": "null"
              }
            ],
            "title": "App Description"
          },
          "callback_url": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 2083,
                "minLength": 1,
                "format": "uri"
              },
              {
                "type": "null"
              }
            ],
            "title": "Callback Url"
          },
          "allowed_origins": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Allowed Origins"
          },
          "rate_limit_per_minute": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 1000.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Rate Limit Per Minute"
          },
          "rate_limit_per_day": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 1000000.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Rate Limit Per Day"
          }
        },
        "type": "object",
        "title": "UpdateClientRequest",
        "description": "Request schema for updating client.",
        "example": {
          "app_name": "My Islamic App v2",
          "rate_limit_per_minute": 100
        }
      },
      "UpdateClientResponse": {
        "properties": {
          "client_id": {
            "type": "string",
            "title": "Client Id"
          },
          "app_name": {
            "type": "string",
            "title": "App Name"
          },
          "app_description": {
            "type": "string",
            "title": "App Description"
          },
          "updated_at": {
            "type": "string",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "client_id",
          "app_name",
          "app_description",
          "updated_at"
        ],
        "title": "UpdateClientResponse",
        "description": "Response schema for client update."
      },
      "UpdateTicketStatusRequest": {
        "properties": {
          "new_status": {
            "type": "string",
            "enum": [
              "open",
              "in_progress",
              "resolved",
              "closed"
            ],
            "title": "New Status"
          },
          "resolution": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolution",
            "description": "Resolution message (required for resolved/closed)"
          }
        },
        "type": "object",
        "required": [
          "new_status"
        ],
        "title": "UpdateTicketStatusRequest",
        "description": "Request schema for updating ticket status.",
        "example": {
          "new_status": "resolved",
          "resolution": "Issue fixed. The document upload feature is now working correctly."
        }
      },
      "UpdateTicketStatusResponse": {
        "properties": {
          "ticket_id": {
            "type": "string",
            "title": "Ticket Id"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "resolution": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolution"
          },
          "resolved_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolved At"
          },
          "closed_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Closed At"
          },
          "updated_at": {
            "type": "string",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "ticket_id",
          "status",
          "resolution",
          "resolved_at",
          "closed_at",
          "updated_at"
        ],
        "title": "UpdateTicketStatusResponse",
        "description": "Response schema for ticket status update."
      },
      "UsageStatisticsResponse": {
        "properties": {
          "client_id": {
            "type": "string",
            "title": "Client Id"
          },
          "period_days": {
            "type": "integer",
            "title": "Period Days"
          },
          "total_requests": {
            "type": "integer",
            "title": "Total Requests"
          },
          "average_response_time_ms": {
            "type": "number",
            "title": "Average Response Time Ms"
          },
          "error_count": {
            "type": "integer",
            "title": "Error Count"
          },
          "error_rate_percent": {
            "type": "number",
            "title": "Error Rate Percent"
          },
          "requests_per_day": {
            "type": "number",
            "title": "Requests Per Day"
          }
        },
        "type": "object",
        "required": [
          "client_id",
          "period_days",
          "total_requests",
          "average_response_time_ms",
          "error_count",
          "error_rate_percent",
          "requests_per_day"
        ],
        "title": "UsageStatisticsResponse",
        "description": "Response schema for usage statistics."
      },
      "UsageStatsResponse": {
        "properties": {
          "messages": {
            "type": "object",
            "title": "Messages"
          },
          "tokens": {
            "type": "object",
            "title": "Tokens"
          },
          "images": {
            "type": "object",
            "title": "Images"
          },
          "documents": {
            "type": "object",
            "title": "Documents"
          },
          "audio_minutes": {
            "type": "object",
            "title": "Audio Minutes"
          },
          "total_cost_usd": {
            "type": "number",
            "title": "Total Cost Usd"
          },
          "cache_savings_usd": {
            "type": "number",
            "title": "Cache Savings Usd"
          }
        },
        "type": "object",
        "required": [
          "messages",
          "tokens",
          "images",
          "documents",
          "audio_minutes",
          "total_cost_usd",
          "cache_savings_usd"
        ],
        "title": "UsageStatsResponse",
        "description": "Usage statistics response."
      },
      "UsageTrendResponse": {
        "properties": {
          "date": {
            "type": "string",
            "title": "Date"
          },
          "messages": {
            "type": "integer",
            "title": "Messages"
          },
          "tokens": {
            "type": "integer",
            "title": "Tokens"
          },
          "images": {
            "type": "integer",
            "title": "Images"
          },
          "cost_usd": {
            "type": "number",
            "title": "Cost Usd"
          },
          "cache_savings_usd": {
            "type": "number",
            "title": "Cache Savings Usd"
          }
        },
        "type": "object",
        "required": [
          "date",
          "messages",
          "tokens",
          "images",
          "cost_usd",
          "cache_savings_usd"
        ],
        "title": "UsageTrendResponse",
        "description": "Usage trends over time."
      },
      "UserListPaginatedResponse": {
        "properties": {
          "users": {
            "items": {
              "$ref": "#/components/schemas/UserListResponse"
            },
            "type": "array",
            "title": "Users"
          },
          "pagination": {
            "type": "object",
            "title": "Pagination"
          }
        },
        "type": "object",
        "required": [
          "users",
          "pagination"
        ],
        "title": "UserListPaginatedResponse",
        "description": "Paginated user list response."
      },
      "UserListResponse": {
        "properties": {
          "user_id": {
            "type": "string",
            "title": "User Id"
          },
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "display_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Display Name"
          },
          "role": {
            "type": "string",
            "title": "Role"
          },
          "is_verified": {
            "type": "boolean",
            "title": "Is Verified"
          },
          "is_banned": {
            "type": "boolean",
            "title": "Is Banned"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          },
          "last_login": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Login"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "email",
          "display_name",
          "role",
          "is_verified",
          "is_banned",
          "created_at",
          "last_login"
        ],
        "title": "UserListResponse",
        "description": "Response schema for user list."
      },
      "UserLoginRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "password": {
            "type": "string",
            "title": "Password"
          }
        },
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "title": "UserLoginRequest",
        "description": "User login request."
      },
      "UserLoginResponse": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "default": "AUTH_LOGIN_SUCCESS"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "user": {
            "$ref": "#/components/schemas/UserResponse"
          },
          "tokens": {
            "$ref": "#/components/schemas/TokenResponse"
          }
        },
        "type": "object",
        "required": [
          "message",
          "user",
          "tokens"
        ],
        "title": "UserLoginResponse",
        "description": "User login response."
      },
      "UserRegisterRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "password": {
            "type": "string",
            "maxLength": 100,
            "minLength": 8,
            "title": "Password"
          },
          "full_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Name"
          },
          "marja_preference": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Marja Preference"
          },
          "preferred_language": {
            "type": "string",
            "maxLength": 10,
            "title": "Preferred Language",
            "default": "fa"
          }
        },
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "title": "UserRegisterRequest",
        "description": "User registration request."
      },
      "UserRegisterResponse": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "default": "AUTH_REGISTRATION_SUCCESS"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id"
          },
          "email": {
            "type": "string",
            "title": "Email"
          },
          "requires_verification": {
            "type": "boolean",
            "title": "Requires Verification",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "message",
          "user_id",
          "email"
        ],
        "title": "UserRegisterResponse",
        "description": "User registration response."
      },
      "UserResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Email"
          },
          "full_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Name"
          },
          "profile_picture_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Profile Picture Url"
          },
          "marja_preference": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Marja Preference"
          },
          "preferred_language": {
            "type": "string",
            "title": "Preferred Language"
          },
          "is_email_verified": {
            "type": "boolean",
            "title": "Is Email Verified"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "account_type": {
            "type": "string",
            "title": "Account Type"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "last_login_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Login At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "email",
          "full_name",
          "profile_picture_url",
          "marja_preference",
          "preferred_language",
          "is_email_verified",
          "is_active",
          "account_type",
          "created_at",
          "last_login_at"
        ],
        "title": "UserResponse",
        "description": "User response schema."
      },
      "UserStatisticsResponse": {
        "properties": {
          "user_id": {
            "type": "string",
            "title": "User Id"
          },
          "display_name": {
            "type": "string",
            "title": "Display Name"
          },
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email"
          },
          "statistics": {
            "type": "object",
            "title": "Statistics"
          },
          "rank": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rank"
          },
          "member_since": {
            "type": "string",
            "title": "Member Since"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "display_name",
          "email",
          "statistics",
          "rank",
          "member_since"
        ],
        "title": "UserStatisticsResponse",
        "description": "Response schema for user statistics."
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "ZakatRequest": {
        "properties": {
          "total_wealth": {
            "type": "number",
            "exclusiveMinimum": 0.0,
            "title": "Total Wealth",
            "description": "Total wealth amount"
          },
          "currency": {
            "type": "string",
            "title": "Currency",
            "description": "Currency code",
            "default": "USD"
          }
        },
        "type": "object",
        "required": [
          "total_wealth"
        ],
        "title": "ZakatRequest",
        "description": "Request schema for Zakat calculation.",
        "example": {
          "currency": "USD",
          "total_wealth": 10000.0
        }
      },
      "ZakatResponse": {
        "properties": {
          "total_wealth": {
            "type": "number",
            "title": "Total Wealth"
          },
          "zakat_amount": {
            "type": "number",
            "title": "Zakat Amount"
          },
          "nisab_threshold": {
            "type": "number",
            "title": "Nisab Threshold"
          },
          "currency": {
            "type": "string",
            "title": "Currency"
          },
          "warning": {
            "type": "string",
            "title": "Warning"
          },
          "verification_required": {
            "type": "boolean",
            "title": "Verification Required",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "total_wealth",
          "zakat_amount",
          "nisab_threshold",
          "currency",
          "warning"
        ],
        "title": "ZakatResponse",
        "description": "Response schema for Zakat calculation.",
        "example": {
          "currency": "USD",
          "nisab_threshold": 3500.0,
          "total_wealth": 10000.0,
          "verification_required": true,
          "warning": "\u26a0\ufe0f\u26a0\ufe0f\u26a0\ufe0f CRITICAL WARNING \u26a0\ufe0f\u26a0\ufe0f\u26a0\ufe0f...",
          "zakat_amount": 250.0
        }
      }
    },
    "securitySchemes": {
      "HTTPBearer": {
        "type": "http",
        "scheme": "bearer"
      }
    }
  }
}